<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.3.2">Jekyll</generator><link href="https://rarcos.com/es/feed.xml" rel="self" type="application/atom+xml" /><link href="https://rarcos.com/es/" rel="alternate" type="text/html" /><updated>2024-08-18T13:21:00+02:00</updated><id>https://rarcos.com/feed.xml</id><title type="html">Rub√©n Arcos</title><subtitle>FullStack, AI &amp; Big Data developer</subtitle><entry xml:lang="es"><title type="html">Chatbot opensource</title><link href="https://rarcos.com/es/2024/05/25/Ollama_api_chatbot/" rel="alternate" type="text/html" title="Chatbot opensource" /><published>2024-05-25T09:10:28+02:00</published><updated>2024-05-25T09:10:28+02:00</updated><id>https://rarcos.com/2024/05/25/Ollama_api_chatbot</id><content type="html" xml:base="https://rarcos.com/2024/05/25/Ollama_api_chatbot/"><![CDATA[<p>La creaci√≥n de un chatbot para una p√°gina web, es una tarea que se suele contratar a un proveedor de servicios, pero en este caso voy a contar como se puede realizar de principio a fin y adem√°s con un conjunto de herramientas que son libres y gratuitas.</p>

<h1 id="creaci√≥n-de-un-chatbot-con-modelo-opensource">Creaci√≥n de un chatbot con modelo opensource</h1>

<p>Los bot de charla o bot conversacional (en ingl√©s: chatbot), son aplicaciones software que surgen en los a√±os 60, y que simulan mantener una conversaci√≥n con una persona al proveer respuestas autom√°ticas, las cuales son previamente establecidas por un conjunto de expertos a entradas realizadas por el usuario. Estos bot, tambi√©n conocidos como sistemas expertos, utilizan el razonamiento basado en casos (CBR: case base reasoning).</p>

<p>Habitualmente, la conversaci√≥n se establece mediante texto, aunque tambi√©n hay modelos que disponen de una interfaz de usuario multimedia que permiten la entrada auditiva. M√°s recientemente, algunos comienzan a utilizar programas conversores de texto a sonido (CTV), dotando de mayor realismo a la interacci√≥n con el usuario y ayudando a reducir el tiempo de respuesta.</p>

<p>Para establecer una conversaci√≥n, han de utilizarse frases f√°cilmente comprensibles y que sean coherentes, aunque la mayor√≠a de los bot conversacionales no consiguen comprender del todo. En su lugar, tienen en cuenta las palabras o frases del interlocutor, que les permitir√°n usar una serie de respuestas preparadas de antemano. Estos son capaces de reconocer la manera en la que una frase est√° formulada gracias a una serie de patrones comparativos preestablecidos, y de este modo, bas√°ndose en las diferentes variables de dicha frase, presentan una respuesta correspondiente. De esta manera, el bot es capaz de seguir una conversaci√≥n con m√°s o menos l√≥gica, pero sin saber realmente de qu√© est√° hablando.</p>

<blockquote>
  <p>Para tener m√°s informaci√≥n te recomiendo visites el siguiente <a href="https://es.wikipedia.org/wiki/Bot_conversacional">art√≠culo</a> de wikipedia de donde se ha obtenido este fragmento.</p>
</blockquote>

<h1 id="qu√©-es-retrieval-augmented-generation-rag">¬øQu√© es Retrieval-Augmented Generation (RAG)?</h1>

<p>Es el aumento de conocimiento que se aplica a un LLM con datos que no ha sido entrenado. Esto permite al sistema de IA generativa proporcionar respuestas contextualmente adecuadas a las consultas, as√≠ como basar dichas respuestas en datos extremadamente recientes.</p>

<p>En pocas palabras, la RAG ayuda a los LLM a proporcionar respuestas m√°s id√≥neas.</p>

<p><strong>Conclusiones clave</strong></p>

<ul>
  <li>La RAG es una t√©cnica de inteligencia artificial relativamente nueva que mejora la calidad de la IA generativa al permitir a grandes modelos de lenguaje (LLM) aprovechar recursos de datos adicionales sin necesidad de volver a entrenarlos.</li>
  <li>Los modelos RAG crean repositorios de conocimientos basados en los datos de la propia organizaci√≥n. Estos repositorios se pueden actualizar continuamente para ayudar a la IA generativa a brindar respuestas adaptadas al contexto y oportunas.</li>
  <li>Los chatbots y otros sistemas conversacionales que utilizan el procesamiento del lenguaje natural pueden beneficiarse enormemente de la RAG y la IA generativa.</li>
  <li>La implementaci√≥n de RAG requiere tecnolog√≠as como bases de datos vectoriales, que permiten la codificaci√≥n r√°pida de nuevos datos y la b√∫squeda en esos datos para alimentar el LLM.</li>
</ul>

<h2 id="c√≥mo-funciona">¬øC√≥mo funciona?</h2>

<p>Los datos de esa biblioteca de conocimientos se procesan en representaciones num√©ricas utilizando un tipo especial de algoritmo llamado modelo de lenguaje embebido y se almacenan en una base de datos vectorial, en la que se puede buscar r√°pidamente para recuperar la informaci√≥n contextual correcta.</p>

<blockquote>
  <p>Para tener m√°s informaci√≥n te recomiendo visites el siguiente <a href="https://www.oracle.com/es/artificial-intelligence/generative-ai/retrieval-augmented-generation-rag/">art√≠culo</a> de Oracle de donde se ha obtenido este fragmento.</p>
</blockquote>

<h1 id="arquitectura">Arquitectura</h1>

<p><img src="/images/pages/ollama_api_arquitectura.jpg" alt="Architecture" title="Ollama API Architecture" /></p>

<p>Nosotros vamos a ejecutar nuestro modelo LLM en un servidor local. Adem√°s vamos a tener la posibilidad de cambiar de modelo desde una interfaz amigable de administraci√≥n, que nos permite descargarnos el modelo que deseemos utilizar e incluso poder probarlo con antelaci√≥n. Por ello, he elegido <a href="https://ollama.com/">Ollama</a> que tiene un <a href="https://ollama.com/library">conjunto de modelos</a> opensource bastante interesante. Vamos a ir viendo paso a paso c√≥mo ir instalando y configurando nuestro software.</p>

<p>Pero antes de nada, vamos a ver una breve descripci√≥n de cada uno de los elementos que vamos a instalar:</p>

<h2 id="ollama">Ollama</h2>

<p>Ollama hace que sea muy f√°cil ejecutar LLM de c√≥digo abierto localmente. Puede esperar un rendimiento decente incluso en port√°tiles peque√±os. Ollama es una alternativa a Hugging Face para ejecutar modelos localmente. Las bibliotecas de Hugging Face se ejecutan sobre Tensorflow o Torch. Ollama usa llama.cpp como tiempo de ejecuci√≥n subyacente. Esto hace que sea muy f√°cil comenzar con Ollama. Ni siquiera necesitas tener Python instalado.</p>

<h2 id="langchain">LangChain</h2>

<p>LangChain es un marco de trabajo de c√≥digo abierto para crear aplicaciones basadas en modelos de lenguaje de gran tama√±o (LLM). Los LLM son grandes modelos de aprendizaje profundo entrenados previamente con grandes cantidades de datos que pueden generar respuestas a las consultas de los usuarios, por ejemplo, responder preguntas o crear im√°genes a partir de peticiones basadas en texto. LangChain proporciona herramientas y abstracciones para mejorar la personalizaci√≥n, precisi√≥n y relevancia de la informaci√≥n que generan los modelos. Por ejemplo, los desarrolladores pueden usar los componentes de LangChain para crear nuevas cadenas de peticiones o personalizar las plantillas existentes. LangChain tambi√©n incluye componentes que permiten a los LLM acceder a nuevos conjuntos de datos sin necesidad de repetir el entrenamiento.</p>

<blockquote>
  <p>Para tener m√°s informaci√≥n te recomiendo visites el siguiente <a href="https://aws.amazon.com/es/what-is/langchain/">art√≠culo</a> de AWS de donde se ha obtenido este fragmento.</p>
</blockquote>

<h2 id="chromadb">ChromaDb</h2>

<p>ChromaDB es una base de datos especializada en el almacenamiento y recuperaci√≥n eficiente de informaci√≥n ling√º√≠stica, incluyendo datos de texto, anotaciones sem√°nticas y sint√°cticas. ChromaDB es particularmente √∫til para el almacenamiento y la gesti√≥n de grandes cantidades de datos de lenguaje natural, lo que permite a los desarrolladores aprovechar al m√°ximo los avances en algoritmos de aprendizaje autom√°tico y an√°lisis de texto.</p>

<blockquote>
  <p>Para tener m√°s informaci√≥n te recomiendo visites el siguiente <a href="https://brainq.ai/chromadb/">art√≠culo</a> de donde se ha obtenido este fragmento.</p>
</blockquote>

<h2 id="api-con-flask">API con Flask</h2>

<p>Flask es un micro marco de trabajo web de Python que proporciona las herramientas necesarias para crear aplicaciones web de manera r√°pida y sencilla. Aunque es un micro marco, Flask es altamente modular y permite agregar f√°cilmente extensiones para agregar funcionalidades adicionales.</p>

<blockquote>
  <p>Para tener m√°s informaci√≥n te recomiendo visites el siguiente <a href="https://datascientest.com/es/programacion-de-api-web-en-python-con-flask">art√≠culo</a> de donde se ha obtenido este fragmento y donde puedes seguir el tutorial detallado de como crear una API con Flask.</p>
</blockquote>

<h2 id="el-chatbot-web">El Chatbot web</h2>

<p>Me he basado en esta integraci√≥n de un chatbot web, para utilizar los recursos y adaptarlo a nuestro modelo opensource alojado en Ollama.</p>

<p>El c√≥digo fuente se encuentra <a href="https://github.com/galaxyofai/chatgpt_flask_webapp">aqu√≠</a>.</p>

<p>Y un explicaci√≥n detallada de como integrarlo con otras API, se encuentra <a href="https://galaxyofai.com/building-a-flask-chat-web-app-with-openais-chatgpt-api/">aqu√≠</a>.</p>

<h1 id="la-demostraci√≥n">La demostraci√≥n</h1>

<p>A continuaci√≥n se ha embebido la aplicaci√≥n realizada. Esta est√° alojada en un servidor de unas caracter√≠sticas muy limitadas para la ejecuci√≥n de desarrollos de inteligencia artificial. Pero como demostraci√≥n de que es posible, aqu√≠ se encuentra en funcionamiento:</p>

<blockquote>
  <p><img src="/images/pages/aviso_icon.png" alt="Aviso" /> <strong>El chatbot est√° alojado en un servidor con pocos recursos.</strong><br /><br />Por ello tarda bastante en contestar. Es precisamente lo que se busca, demostrar la viabilidad en este tipo de entornos.</p>
</blockquote>

<p>Preguntas de ejemplo que puede realizar:</p>
<ul>
  <li>¬øQu√© experiencia tiene Rub√©n Arcos?</li>
  <li>¬øCu√°ntos a√±os de experiencia tiene Rub√©n Arcos?</li>
  <li>¬øQu√© lenguajes de programaci√≥n sabe Rub√©n Arcos?</li>
</ul>

<p><em>Haga clic sobre la burbuja morada, para abrir el Chatbot</em></p>

<p style="text-align: center">
  <iframe style="border: 0" id="chatbot" title="Chatbot" width="390" height="600" src="https://vps.rarcos.com:10453/">
  </iframe>
</p>

<h1 id="el-tutorial">El tutorial</h1>

<p>Como viene siendo habitual en esta p√°gina web, vamos a utilizar un entorno dockerizado que ser√° el encargado de levantar Ollama, el administrador web de Ollama y nuestra aplicaci√≥n de ChatBot web.</p>

<p>Para ello tenemos los siguiente scripts de <em>docker compose</em>:</p>

<h3 id="script-de-ejecuci√≥n-m√°s-completo-sin-gpu">Script de ejecuci√≥n m√°s completo (sin GPU)</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>version: '3.8'
services:
  app:
    build: .
    container_name: ollama-app
    ports:
      - 8002:8002
      - 5678:5678
    volumes:
      - ./app:/usr/src/app/
    command: python app.py
    restart: always
    depends_on:
      - ollama
      - ollama-webui
    networks:
      - ollama-docker

  ollama:
    image: ollama/ollama:latest
    ports:
      - 11434:11434
    volumes:
      - .:/code
      - ./ollama/ollama:/root/.ollama
    container_name: ollama
    pull_policy: always
    tty: true
    restart: always
    networks:
      - ollama-docker

  ollama-webui:
    image: ghcr.io/open-webui/open-webui:main
    container_name: ollama-webui
    volumes:
      - ./ollama/ollama-webui:/app/backend/data
    depends_on:
      - ollama
    ports:
      - 8080:8080
    environment:
      - '/ollama/api=http://ollama:11434/api'
    extra_hosts:
      - host.docker.internal:host-gateway
    restart: unless-stopped
    networks:
      - ollama-docker

networks:
  ollama-docker:
    external: false

</code></pre></div></div>

<h3 id="el-script-m√≠nimo-sin-gpu">El script m√≠nimo (sin GPU)</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>services:

  ollama:
    image: ollama/ollama:latest
    container_name: ollama
    tty: true
    restart: unless-stopped
    # Expose Ollama API outside the container stack
    ports:
      - 11434:11434
      - 53:53
    volumes:
      - ollama:/root/.ollama
    command: pip install -r requirements.txt

  open-webui:
    image: ghcr.io/open-webui/open-webui:main
    container_name: open-webui
    volumes:
      - open-webui:/app/backend/data
    depends_on:
      - ollama
    ports:
      - 8080:8080
    environment:
      - "OLLAMA_API_BASE_URL=http://ollama:11434/api"
    extra_hosts:
      - host.docker.internal:host-gateway
    restart: unless-stopped

volumes:
  ollama: {}
  open-webui: {}
</code></pre></div></div>
<h3 id="el-script-para-utilizaci√≥n-de-gpu">El script para utilizaci√≥n de GPU</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>version: '3.8'

services:
  app:
    build: .
    ports:
      - 8000:8000
      - 5678:5678
    volumes:
      - .:/code
    command: uvicorn src.main:app --host 0.0.0.0 --port 8000 --reload
    restart: always
    depends_on:
      - ollama
      - ollama-webui
    networks:
      - ollama-docker
      
  ollama:
    volumes:
      - ./ollama/ollama:/root/.ollama
    container_name: ollama
    pull_policy: always
    tty: true
    restart: unless-stopped
    image: ollama/ollama:latest
    ports:
      - 11434:11434
    networks:
      - ollama-docker
    deploy:
      resources:
        reservations:
          devices:
            - driver: nvidia
              count: 1
              capabilities: [gpu]

  ollama-webui:
    image: ghcr.io/open-webui/open-webui:main
    container_name: ollama-webui
    volumes:
      - ./ollama/ollama-webui:/app/backend/data
    depends_on:
      - ollama
    ports:
      - 8080:8080
    environment:
      - '/ollama/api=http://ollama:11434/api'
    extra_hosts:
      - host.docker.internal:host-gateway
    restart: unless-stopped
    networks:
      - ollama-docker

networks:
  ollama-docker:
    external: false

</code></pre></div></div>

<p>Las rutas de acceso que se establecen son:</p>
<ul>
  <li>P√°gina web de administraci√≥n de Ollama: <a href="http://localhost:8080">http://localhost:8080</a></li>
  <li>Motor de Ollana: <a href="http://localhost:11434">http://localhost:11434</a></li>
  <li>Aplicaci√≥n web: <a href="http://localhost:8002">http://localhost:8002</a></li>
</ul>

<blockquote>
  <p>Para tener m√°s informaci√≥n te recomiendo visites el siguiente <a href="https://github.com/valiantlynx/ollama-docker/">repositorio</a> de donde se ha obtenido este script y donde hay m√°s ejemplos e informaci√≥n.</p>
</blockquote>

<h3 id="la-instalaci√≥n-del-modelo-desde-el-administrador-web-de-ollama">La instalaci√≥n del modelo desde el administrador web de Ollama</h3>

<p>Una vez tenemos el docker levantado, tan solo tenemos que entrar a la url <a href="http://localhost:8080">http://localhost:8080</a>, descargar e instalar el modelo.</p>

<p>A continuaci√≥n se muestra un video de c√≥mo se realiza:</p>

<p><img src="/images/pages/ollama_install.gif" alt="video" /></p>

<p>En nuestro caso introduciremos el modelo: <em>mistral:instruct</em></p>

<h3 id="la-aplicaci√≥n-en-consola-el-chatbot">La aplicaci√≥n en consola (el chatbot)</h3>

<p>Luego tenemos la aplicaci√≥n en consola que consume el modelo LLM, en nuestro ejemplo se ha utilizado <em>Mistral</em> por sus gran rendimiento similar a Llama y por ser opensource. Tambi√©n tenemos la especificaci√≥n del promt de consulta, con unas instrucciones previas a las consultas. Y el m√©todo de entrenamiento RAG.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>from langchain_community.vectorstores import Chroma
from langchain_community.chat_models import ChatOllama
from langchain_community.embeddings.fastembed import FastEmbedEmbeddings
from langchain_community.document_loaders import WebBaseLoader
from langchain.text_splitter import CharacterTextSplitter
from langchain_core.prompts import ChatPromptTemplate
from langchain.chains.combine_documents import create_stuff_documents_chain
from langchain.chains import create_retrieval_chain
import sys
 
class ChatWebDoc:
    vector_store = None
    retriever = None
    chain = None
 
    def __init__(self):
        self.model = ChatOllama(model="mistral:instruct")
        #Loading embedding
        self.embedding = FastEmbedEmbeddings()
 
        self.text_splitter = CharacterTextSplitter(chunk_size=1024, chunk_overlap=100)
        self.prompt = ChatPromptTemplate.from_messages(
        [
            ("system", 
"""You are an assistant for question-answering tasks. Use only the following 
context to answer the question. If you don't know the answer, just say that you don't know.
 
CONTEXT:
 
{context}
"""),
            ("human", "{input}"),
        ]
    )
 
    def ingest(self, url_list):
        #Load web pages
        docs = WebBaseLoader(url_list).load()
        chunks = self.text_splitter.split_documents(docs)
 
        #Create vector store
        vector_store = Chroma.from_documents(documents=chunks, 
            embedding=self.embedding, persist_directory="./chroma_db")
 
    def load(self):
        #Load vector store
        vector_store = Chroma(persist_directory="./chroma_db", 
            embedding_function=self.embedding)
 
        #Create chain
        self.retriever = vector_store.as_retriever(
            search_type="similarity_score_threshold",
            search_kwargs={
                "k": 3,
                "score_threshold": 0.5,
            },
        )
 
        document_chain = create_stuff_documents_chain(self.model, self.prompt)
        self.chain = create_retrieval_chain(self.retriever, document_chain)
 
    def ask(self, query: str):
        if not self.chain:
            self.load()
 
        result = self.chain.invoke({"input": query})
 
        print(result["answer"])
        for doc in result["context"]:
            print("Source: ", doc.metadata["source"])
 
 
def build():
    w = ChatWebDoc()
    w.ingest([
        "https://www.webagesolutions.com/courses/WA3446-comprehensive-angular-programming",
        "https://www.webagesolutions.com/courses/AZ-1005-configuring-azure-virtual-desktop-for-the-enterprise",
        "https://www.webagesolutions.com/courses/AZ-305T00-designing-microsoft-azure-infrastructure-solutions",
        ])
 
def chat():
    w = ChatWebDoc()
 
    w.load()
 
    while True:
        query = input("&gt;&gt;&gt; ")
 
        if len(query) == 0:
            continue
 
        if query == "/exit":
            break
         
        w.ask(query)
 
if len(sys.argv) &lt; 2:
    chat()
elif sys.argv[1] == "--ingest":
    build()
</code></pre></div></div>

<p>La ejecuci√≥n del entrenamiento RAG de las web provistas anteriorement en el programa anterior se realiza con el comando:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python rag-test.py --ingest
</code></pre></div></div>

<p>La interactuaci√≥n con el model una vez entrenado:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python rag-test.py
</code></pre></div></div>

<blockquote>
  <p>Recomiendo ver con mayor detalle esta <a href="https://mobiarch.wordpress.com/2024/02/19/run-rag-locally-using-mistral-ollama-and-langchain/">p√°gina web</a> donde se trata esta misma aplicaci√≥n.</p>
</blockquote>

<h2 id="la-aplicaci√≥n-web-el-chatbot">La aplicaci√≥n web (el Chatbot)</h2>

<p>Queda pendiente para una futura actualizaci√≥n del art√≠culo que os muestre como integrar en la aplicaci√≥n web el motor LLM, interactuar con el, entrenarlo con el m√©todo RAG y levantarlo en el servidor web. ¬°Hasta pronto! üòâ</p>

<hr />

<p><strong>Fuentes:</strong></p>

<ul>
  <li><a href="https://github.com/valiantlynx/ollama-docker/">https://github.com/valiantlynx/ollama-docker</a></li>
  <li><a href="https://mobiarch.wordpress.com/2024/02/19/run-rag-locally-using-mistral-ollama-and-langchain/">https://mobiarch.wordpress.com/2024/02/19/run-rag-locally-using-mistral-ollama-and-langchain/</a></li>
  <li><a href="https://realpython.com/build-llm-rag-chatbot-with-langchain/">https://realpython.com/build-llm-rag-chatbot-with-langchain/</a></li>
</ul>]]></content><author><name></name></author><category term="ia" /><category term="rag" /><category term="open source" /><category term="modelos" /><summary type="html"><![CDATA[Creaci√≥n de un chatbot con modelo opensource. Aplicando la t√©cnica RAG y utilizando Ollama, LangChain, ChromaDb y una salida final como API a un chatbot web]]></summary></entry><entry xml:lang="es"><title type="html">RAG con modelos de IA open source</title><link href="https://rarcos.com/es/2024/05/25/RAG_modelos_open_source/" rel="alternate" type="text/html" title="RAG con modelos de IA open source" /><published>2024-05-25T08:23:28+02:00</published><updated>2024-05-25T08:23:28+02:00</updated><id>https://rarcos.com/2024/05/25/RAG_modelos_open_source</id><content type="html" xml:base="https://rarcos.com/2024/05/25/RAG_modelos_open_source/"><![CDATA[<h1 id="uso-de-rag-generaci√≥n-aumentada-por-recuperaci√≥n-en-modelos-open-source">Uso de RAG (Generaci√≥n Aumentada por Recuperaci√≥n) en modelos open source</h1>

<p style="text-align: justify">
La generaci√≥n mejorada por recuperaci√≥n (RAG) es el proceso de optimizaci√≥n de la salida de un modelo ling√º√≠stico de gran tama√±o, de modo que haga referencia a una base de conocimientos autorizada fuera de los or√≠genes de datos de entrenamiento antes de generar una respuesta. Los modelos de lenguaje de gran tama√±o (LLM) se entrenan con grandes vol√∫menes de datos y usan miles de millones de par√°metros para generar resultados originales en tareas como responder preguntas, traducir idiomas y completar frases. RAG extiende las ya poderosas capacidades de los LLM a dominios espec√≠ficos o a la base de conocimientos interna de una organizaci√≥n, todo ello sin la necesidad de volver a entrenar el modelo. Se trata de un m√©todo rentable para mejorar los resultados de los LLM de modo que sigan siendo relevantes, precisos y √∫tiles en diversos contextos.
</p>

<ul>
  <li>Para tener m√°s informaci√≥n te recomiendo visites el siguiente <a href="https://aws.amazon.com/es/what-is/retrieval-augmented-generation/">art√≠culo</a> de AWS.</li>
  <li>Tambi√©n en este <a href="https://www.thepowerplatformcave.com/rag-ia-generativa-con-tus-datos/">art√≠culo</a> se explica de una forma m√°s t√©cnica.</li>
</ul>

<p>A continuaci√≥n se muestran las fases de la t√©cnica RAG:</p>

<p style="text-align: center">
    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSYb12anR2JNWP4NDPZ6e1qiEEt3DhUMWkiCqk1YSC53w&amp;s" />    
    <img src="https://observatorio-ia.com/wp-content/uploads/2024/02/RAG.png" />    
</p>

<hr />

<p><em>Repositorio con el contenido</em></p>

<p>RAG Mistral model</p>

<p><a href="https://colab.research.google.com/drive/1JS0bucLeiNdbFsf6y0gr3bo62lcsCwNj?usp=sharing"><img src="/images/pages/repository_small_colab.png" alt="Repository1" /></a></p>

<p>RAG RoBERTa model</p>

<p><a href="https://colab.research.google.com/drive/1wEJDmyXSdmPH1E9pba9mRrkUSVilzNUn?usp=sharing"><img src="/images/pages/repository_small_colab.png" alt="Repository2" /></a></p>

<hr />

<p><strong>Fuentes:</strong></p>

<ul>
  <li><a href="https://aws.amazon.com/es/what-is/retrieval-augmented-generation/">https://aws.amazon.com/es/what-is/retrieval-augmented-generation/</a></li>
  <li><a href="https://www.thepowerplatformcave.com/rag-ia-generativa-con-tus-datos/">https://www.thepowerplatformcave.com/rag-ia-generativa-con-tus-datos/ </a></li>
  <li><a href="https://observatorio-ia.com/wp-content/uploads/2024/02/RAG.png">https://observatorio-ia.com/wp-content/uploads/2024/02/RAG.png</a></li>
  <li><a href="https://www.e2enetworks.com/blog/implementing-a-rag-pipeline-with-mixtral-8x7b">https://www.e2enetworks.com/blog/implementing-a-rag-pipeline-with-mixtral-8x7b</a></li>
  <li><a href="https://www.hiberus.com/crecemos-contigo/ask-your-web-pages-otro-enfoque-rag-utilizando-modelos-de-codigo-abierto/">https://www.hiberus.com/crecemos-contigo/ask-your-web-pages-otro-enfoque-rag-utilizando-modelos-de-codigo-abierto/</a></li>
  <li><a href="https://www.datacamp.com/tutorial/mistral-7b-tutorial">https://www.datacamp.com/tutorial/mistral-7b-tutorial</a></li>
  <li><a href="https://haystack.deepset.ai/tutorials/22_pipeline_with_promptnode">https://haystack.deepset.ai/tutorials/22_pipeline_with_promptnode</a></li>
</ul>]]></content><author><name></name></author><category term="ia" /><category term="rag" /><category term="open source" /><category term="modelos" /><summary type="html"><![CDATA[RAG (Generaci√≥n Aumentada por Recuperaci√≥n) lleva la precisi√≥n a los modelos del lenguaje]]></summary></entry><entry xml:lang="es"><title type="html">Angular 17 + Spring Boot 3 + Spring Security 6 + JWT</title><link href="https://rarcos.com/es/2023/11/20/Spring_boot_angular/" rel="alternate" type="text/html" title="Angular 17 + Spring Boot 3 + Spring Security 6 + JWT" /><published>2023-11-20T15:33:28+01:00</published><updated>2023-11-20T15:33:28+01:00</updated><id>https://rarcos.com/2023/11/20/Spring_boot_angular</id><content type="html" xml:base="https://rarcos.com/2023/11/20/Spring_boot_angular/"><![CDATA[<h1 id="angular-17--spring-boot-3--spring-security-6--jwt">Angular 17 + Spring Boot 3 + Spring Security 6 + JWT</h1>

<p style="text-align: justify">
La finalidad principal de la aplicaci√≥n, ha sido la demostraci√≥n de la puesta en pr√°ctica de los conocimientos adquiridos sobre la gesti√≥n de privilegios de acceso de usuarios a distintos elementos (o m√≥dulos como me referir√© a lo largo del documento) de la aplicaci√≥n, la gesti√≥n de usuarios jerarquizados en distintos grupos (denominados roles) y la administraci√≥n por parte de un usuario autorizado. No menos relevante ha sido la aplicaci√≥n de los conocimientos en el dise√±o y gesti√≥n de bases de datos relacionales y las plataformas de implementaci√≥n de estas. Otro factor que se ha tenido en cuenta ha sido la seguridad del entorno de uso (JWT) y de la aplicaci√≥n (Angular), implementando funcionalidades como, la encriptaci√≥n de datos sensibles, o la prevenci√≥n en la utilizaci√≥n de elementos sensibles a la inyecci√≥n de informaci√≥n automatizada (cracking o ataques de fuerza bruta).
</p>

<h1 id="arquitectura">Arquitectura</h1>

<p>Esta es la arquitectura que se ha utilizado para el entorno de producci√≥n en un VPS.</p>

<p><img src="/images/pages/spring_boot_arquitectura.png" alt="VPS Architecture" title="Spring Boot VPS Architecture" /></p>

<p>Separaci√≥n l√≥gica del frontend, backend y la base de datos.</p>

<p><img src="/images/pages/spring_boot_arquitectura_Front-Back.png" alt="Architecture GesMerCa Frontend-Backend" title="Spring Boot Frontend-Backend architecture" /></p>

<h2 id="entorno-de-ejecuci√≥n---frontend">Entorno de ejecuci√≥n - Frontend</h2>

<p style="text-align: center">
<a href="https://vps.rarcos.com:10451/" target="_blank">
    <img src="/images/pages/gesmerca.png" width="100" alt="GesMerCa Logo" />Demo online
</a>
</p>

<h2 id="documentaci√≥n-api---backend">Documentaci√≥n API - Backend</h2>

<p style="text-align: center">
<a href="https://vps.rarcos.com:10447/" target="_blank">
    <img src="https://avatars.githubusercontent.com/u/7658037?s=200&amp;v=4" width="100" alt="Swagger Logo" />Documentaci√≥n API online
</a>
</p>

<hr />

<p><em>Repositorio con el contenido</em></p>

<p><a href="https://github.com/rubenarcos2/spring_security_angular"><img src="/images/pages/repository_small.png" alt="Repository" /></a></p>

<hr />

<p><strong>Fuentes:</strong></p>

<p><em>Spring security + JWT</em></p>

<ul>
  <li><a href="https://www.youtube.com/playlist?list=PL4bT56Uw3S4z9rtwwGvuk1Mjhu5sdLSwX">https://www.youtube.com/playlist?list=PL4bT56Uw3S4z9rtwwGvuk1Mjhu5sdLSwX</a></li>
  <li><a href="https://github.com/cavanosa/tutorial_jwt_BACK">https://github.com/cavanosa/tutorial_jwt_BACK</a></li>
</ul>]]></content><author><name></name></author><category term="javascript" /><category term="php" /><category term="angular" /><category term="laravel" /><category term="proyecto integrado" /><category term="gesmerca" /><summary type="html"><![CDATA[Gesti√≥n de privilegios de acceso de usuarios a distintos elementos con spring boot, spring security, JWT y Angular.]]></summary></entry><entry xml:lang="es"><title type="html">Proyecto Integrado DAW</title><link href="https://rarcos.com/es/2023/06/30/Proyecto_integrado/" rel="alternate" type="text/html" title="Proyecto Integrado DAW" /><published>2023-06-30T16:33:28+02:00</published><updated>2023-06-30T16:33:28+02:00</updated><id>https://rarcos.com/2023/06/30/Proyecto_integrado</id><content type="html" xml:base="https://rarcos.com/2023/06/30/Proyecto_integrado/"><![CDATA[<h1 id="proyecto-integrado-fin-del-ciclo-formativo-de-grado-superior-en-desarrollo-de-aplicaciones-web">Proyecto integrado fin del Ciclo Formativo de Grado Superior en desarrollo de Aplicaciones Web</h1>

<p style="text-align: justify">
La finalidad principal de la aplicaci√≥n, ha sido la demostraci√≥n de la puesta en pr√°ctica de los conocimientos adquiridos a lo largo del ciclo formativo de desarrollo de aplicaciones web. He focalizado la aplicaci√≥n en los conocimientos adquiridos sobre la gesti√≥n de privilegios de acceso de usuarios a distintos elementos (o m√≥dulos como me referir√© a lo largo del documento) de la aplicaci√≥n, la gesti√≥n de usuarios jerarquizados en distintos grupos (denominados roles) y la administraci√≥n por parte de un usuario autorizado. No menos relevante ha sido la aplicaci√≥n de los conocimientos en el dise√±o y gesti√≥n de bases de datos relacionales y las plataformas de implementaci√≥n de estas. Otro factor que se ha tenido en cuenta ha sido la seguridad del entorno de uso (JWT) y de la aplicaci√≥n (Angular), implementando funcionalidades como, la encriptaci√≥n de datos sensibles, o la prevenci√≥n en la utilizaci√≥n de elementos sensibles a la inyecci√≥n de informaci√≥n automatizada (cracking o ataques de fuerza bruta).
</p>

<h1 id="tecnolog√≠as">Tecnolog√≠as</h1>
<ul>
  <li>Frontend: Angular 16</li>
  <li>Backend: Laravel 10 + JWT</li>
  <li>API externa: IA (Flask)</li>
</ul>

<h1 id="presentaci√≥n-y-exposici√≥n-del-proyecto">Presentaci√≥n y exposici√≥n del proyecto</h1>

<iframe src="https://drive.google.com/file/d/1aQDC9SKSf5Bv2m2dRbUT85_k6z7MnYG9/preview" frameborder="0" allowfullscreen="" width="100%" height="400"></iframe>

<iframe type="application/pdf" src="/pdf/Gesmerca_DAW_Presentacion.pdf#toolbar=0" frameborder="0" allowfullscreen="" width="100%" height="500"></iframe>

<h1 id="arquitectura">Arquitectura</h1>

<p>Esta es la arquitectura que se ha utilizado para el entorno de producci√≥n, en un VPS.</p>

<p><img src="/images/pages/GesMerCa_arquitectura.png" alt="Arquitectura en VPS" title="Arquitectura en VPS de GesMerCa" /></p>

<p>La separaci√≥n l√≥gica del frontend, el backend y la base de datos.</p>

<p><img src="/images/pages/GesMerCa_arquitectura_Front-Back.png" alt="Arquitectura GesMerCa Frontend-Backend" title="Arquitectura GesMerCa Frontend-Backend" /></p>

<h2 id="entorno-de-ejecuci√≥n---frontend">Entorno de ejecuci√≥n - Frontend</h2>

<p style="text-align: center">
<a href="https://vps.rarcos.com:10448/" target="_blank">
    <img src="/images/pages/gesmerca.png" width="100" alt="GesMerCa Logo" />¬†Demostraci√≥n web online
</a>
</p>
<h2 id="documentaci√≥n-de-la-api---backend">Documentaci√≥n de la API - Backend</h2>
<p style="text-align: center">
<a href="https://vps.rarcos.com:10447/" target="_blank">
    <img src="https://avatars.githubusercontent.com/u/7658037?s=200&amp;v=4" width="100" alt="Swagger Logo" />¬†Documentaci√≥n api online
</a>
</p>

<h2 id="documentaci√≥n-completa-y-diagramas-del-proyecto">Documentaci√≥n completa y diagramas del proyecto</h2>

<iframe type="application/pdf" src="/pdf/Documentacion_GESMERCA_anticopia_DAW.pdf#toolbar=0" frameborder="0" allowfullscreen="" width="100%" height="990"></iframe>

<hr />

<p><em>Repositorio con el contenido</em></p>

<p><a href="https://github.com/rubenarcos2/proyecto_daw/tree/main/frontend/gesmerca"><img src="/images/pages/repository_small.png" alt="Repositorio" /></a>
Frontend
<a href="https://github.com/rubenarcos2/proyecto_daw/tree/main/backend/gesmerca"><img src="/images/pages/repository_small.png" alt="Repositorio" /></a>
Backend
<a href="https://github.com/rubenarcos2/proyecto_daw/tree/main/IA"><img src="/images/pages/repository_small.png" alt="Repositorio" /></a>
IA</p>

<hr />

<p><strong>Fuentes:</strong></p>

<p><em>Angular</em></p>

<ul>
  <li><a href="https://openwebinars.net/academia/aprende/angular/9221/">https://openwebinars.net/academia/aprende/angular/9221/</a></li>
  <li><a href="https://www.positronx.io/laravel-angular-token-based-authentication-with-jwt/">https://www.positronx.io/laravel-angular-token-based-authentication-with-jwt/</a></li>
  <li><a href="https://www.ultimateakash.com/blog-details/Ii1TNGAKYAo=/How-to-Implement-JWT-Authentication-in-Angular-2023">https://www.ultimateakash.com/blog-details/Ii1TNGAKYAo=/How-to-Implement-JWT-Authentication-in-Angular-2023</a></li>
  <li><a href="https://www.tektutorialshub.com/angular/meta-service-in-angular-add-update-meta-tags-example/">https://www.tektutorialshub.com/angular/meta-service-in-angular-add-update-meta-tags-example/</a>
<a href="https://angular.io/api/platform-browser/MetaDefinition">https://angular.io/api/platform-browser/MetaDefinition</a></li>
  <li><a href="https://www.concretepage.com/angular-2/angular-2-4-minlength-and-maxlength-validation-example#:~:text=It%20means%20the%20value%20entered,can%20write%20code%20as%20below.">https://www.concretepage.com/angular-2/angular-2-4-minlength-and-maxlength-validation-example#:~:text=It%20means%20the%20value%20entered,can%20write%20code%20as%20below.</a></li>
  <li><a href="https://stackoverflow.com/questions/52389376/how-to-reload-current-page">https://stackoverflow.com/questions/52389376/how-to-reload-current-page</a></li>
</ul>

<p><em>LocalStorage y sessionStorage</em></p>

<ul>
  <li><a href="https://ed.team/blog/que-es-y-como-utilizar-localstorage-y-sessionstorage">https://ed.team/blog/que-es-y-como-utilizar-localstorage-y-sessionstorage</a></li>
</ul>

<p><em>Component Lifecycle</em></p>

<ul>
  <li><a href="https://angular.io/guide/lifecycle-hooks">https://angular.io/guide/lifecycle-hooks</a></li>
</ul>

<p><em>Unit testing</em></p>

<ul>
  <li><a href="https://www.infragistics.com/community/blogs/b/infragistics/posts/unit-testing-in-angular">https://www.infragistics.com/community/blogs/b/infragistics/posts/unit-testing-in-angular</a> -&gt; ng test ‚Äìcode-coverage</li>
</ul>

<p><em>Auth guard with roles/permission based</em></p>

<ul>
  <li><a href="https://jasonwatmore.com/post/2022/12/22/angular-14-role-based-authorization-tutorial-with-example">https://jasonwatmore.com/post/2022/12/22/angular-14-role-based-authorization-tutorial-with-example</a></li>
</ul>

<p><em>Unsuscribing AJAX request</em></p>

<ul>
  <li><a href="https://nocodenobug.substack.com/p/rxjs-en-angular-el-drama-de-las-suscripciones">https://nocodenobug.substack.com/p/rxjs-en-angular-el-drama-de-las-suscripciones</a></li>
</ul>

<p><em>Laravel</em>
<em>Creaci√≥n del API rest en laravel con autenticaci√≥n JWT</em></p>

<ul>
  <li><a href="https://www.positronx.io/laravel-jwt-authentication-tutorial-user-login-signup-api/">https://www.positronx.io/laravel-jwt-authentication-tutorial-user-login-signup-api/</a></li>
  <li><a href="https://www.nigmacode.com/laravel/roles-de-usuario-en-laravel/">https://www.nigmacode.com/laravel/roles-de-usuario-en-laravel/</a> -&gt; php artisan vendor:publish ‚Äìprovider=‚ÄùSpatie\Permission\PermissionServiceProvider‚Äù</li>
  <li><a href="https://laraveldaily.com/post/laravel-api-errors-and-exceptions-how-to-return-responses">https://laraveldaily.com/post/laravel-api-errors-and-exceptions-how-to-return-responses</a></li>
  <li><a href="https://stackoverflow.com/questions/64897053/laravel-8-return-all-exceptions-as-json">https://stackoverflow.com/questions/64897053/laravel-8-return-all-exceptions-as-json</a></li>
  <li><a href="https://www.itsolutionstuff.com/post/laravel-9-user-roles-and-permissions-tutorialexample.html">https://www.itsolutionstuff.com/post/laravel-9-user-roles-and-permissions-tutorialexample.html</a>
<a href="https://larainfo.com/blogs/laravel-9-image-file-upload-example">https://larainfo.com/blogs/laravel-9-image-file-upload-example</a></li>
  <li><a href="https://stackoverflow.com/questions/68128685/laravel-get-public-url-for-file-stored-in-storage-public-folder">https://stackoverflow.com/questions/68128685/laravel-get-public-url-for-file-stored-in-storage-public-folder</a> -&gt; php artisan storage:link
<a href="https://tinkerwell.app/blog/laravel-caches-and-all-ways-to-clear-them">https://tinkerwell.app/blog/laravel-caches-and-all-ways-to-clear-them</a></li>
  <li><a href="https://www.positronx.io/laravel-image-resize-upload-with-intervention-image-package/">https://www.positronx.io/laravel-image-resize-upload-with-intervention-image-package/</a></li>
</ul>

<p><em>Spatie permissions</em></p>

<ul>
  <li><a href="https://spatie.be/docs/laravel-permission/v5/basic-usage/direct-permissions">https://spatie.be/docs/laravel-permission/v5/basic-usage/direct-permissions</a></li>
  <li><a href="https://laravelcode.com/post/laravel-8-user-roles-and-permissions-using-spatie">https://laravelcode.com/post/laravel-8-user-roles-and-permissions-using-spatie</a>
<a href="https://spatie.be/docs/laravel-permission/v5/basic-usage/role-permissions">https://spatie.be/docs/laravel-permission/v5/basic-usage/role-permissions</a></li>
  <li><a href="https://scrutinizer-ci.com/g/spatie/laravel-permission/code-structure/master/operation/Spatie%5CPermission%5CTraits%5CHasPermissions::syncPermissions">https://scrutinizer-ci.com/g/spatie/laravel-permission/code-structure/master/operation/Spatie%5CPermission%5CTraits%5CHasPermissions::syncPermissions</a></li>
</ul>

<p><em>Faker y seed imagenes</em></p>

<ul>
  <li><a href="https://styde.net/generando-datos-de-prueba-con-faker-en-laravel/">https://styde.net/generando-datos-de-prueba-con-faker-en-laravel/</a></li>
  <li><a href="https://github.com/fzaninotto/Faker#formatters">https://github.com/fzaninotto/Faker#formatters</a></li>
  <li><a href="https://kodementor.com/how-to-seeds-images-with-faker-in-laravel/">https://kodementor.com/how-to-seeds-images-with-faker-in-laravel/</a></li>
  <li><a href="https://styde.net/insercion-de-datos-con-los-seeders-de-laravel/">https://styde.net/insercion-de-datos-con-los-seeders-de-laravel/</a> -&gt; php artisan migrate:fresh ‚Äìseed</li>
</ul>

<p><em>V√≠nculo de storage -&gt; public</em></p>

<ul>
  <li><a href="https://laravel.com/docs/10.x/filesystem#the-public-disk">https://laravel.com/docs/10.x/filesystem#the-public-disk</a> -&gt; php artisan storage:link</li>
</ul>

<p><em>Unit testing</em></p>

<ul>
  <li><a href="https://platzi.com/discusiones/1842-intro-laravel/85644-que-diferencia-hay-entre-unit-test-y-feature-test/">https://platzi.com/discusiones/1842-intro-laravel/85644-que-diferencia-hay-entre-unit-test-y-feature-test/</a></li>
  <li><a href="https://laravel.com/docs/10.x/testing">https://laravel.com/docs/10.x/testing</a> -&gt; php artisan test</li>
</ul>

<p><em>Docker postgreSQL database backup</em></p>

<ul>
  <li><a href="https://stackoverflow.com/questions/30171063/how-to-generate-a-postgresql-dump-from-a-docker-container">https://stackoverflow.com/questions/30171063/how-to-generate-a-postgresql-dump-from-a-docker-container</a></li>
</ul>]]></content><author><name></name></author><category term="javascript" /><category term="php" /><category term="angular" /><category term="laravel" /><category term="proyecto integrado" /><category term="gesmerca" /><summary type="html"><![CDATA[Proyecto integrado fin del Ciclo Formativo de Grado Superior en desarrollo de Aplicaciones Web.Angular 16 + Laravel 10 + JWT + IA]]></summary></entry><entry xml:lang="es"><title type="html">Securizando VPS</title><link href="https://rarcos.com/es/2023/03/14/Securizando-VPS/" rel="alternate" type="text/html" title="Securizando VPS" /><published>2023-03-14T06:41:00+01:00</published><updated>2023-03-14T06:41:00+01:00</updated><id>https://rarcos.com/2023/03/14/Securizando%20VPS</id><content type="html" xml:base="https://rarcos.com/2023/03/14/Securizando-VPS/"><![CDATA[<p>A modo de apuntes, una securizaci√≥n est√°ndar de un VPS:</p>
<ul>
  <li><a href="#seg-basica">Seguridad b√°sica</a></li>
  <li><a href="#ssh">Autenticaci√≥n basada en clave SSH </a></li>
  <li><a href="#maldet">Detecci√≥n de malware - maldet</a></li>
  <li><a href="#postfix">Postfix - Env√≠o de emai</a></li>
  <li><a href="#cpu">Notificaci√≥n si CPU m√°x</a></li>
</ul>

<p><a name="seg-basica"></a></p>

<h1 id="seguridad-de-linux-y-debilidades-comunes">Seguridad de Linux y debilidades comunes</h1>

<p>15 consejos de seguridad de VPS para proteger la seguridad de tu servidor</p>

<p><a href="https://www.hostinger.es/tutoriales/seguridad-vps">https://www.hostinger.es/tutoriales/seguridad-vps</a></p>

<p><a name="ssh"></a></p>

<h1 id="autenticaci√≥n-basada-en-clave-ssh---acceso">Autenticaci√≥n basada en clave SSH - Acceso</h1>

<p>Generaci√≥n del para de claves: p√∫blica-privada</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">ssh-keygen <span class="nt">-t</span> rsa</code></pre></figure>

<p>Autorizaci√≥n de la clave p√∫blica</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">cat</span> ~/.ssh/id_rsa.pub <span class="o">&gt;&gt;</span> ~/.ssh/authorized_keys</code></pre></figure>

<p>Deshabilitar la autenticaci√≥n de contrase√±a en su servidor</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">sudo </span>nano /etc/ssh/sshd_config</code></pre></figure>

<p>Cambiar el valor de PasswordAuthentication dentro del sshd_config a:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">PasswordAuthentication no</code></pre></figure>

<p>Reiniciamos el servidor SSH para que se hagan efectivo los cambios:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">service ssh restart</code></pre></figure>

<p>Pasamos por sftp la clave privada <em>id_rsa</em> al cliente que vayamos a utilizar. Putty en mi caso.
En la parte del cliente, instalamos putty y generamos la clave privada de la siguiente forma:</p>

<p><a href="https://www.simplified.guide/putty/convert-ssh-key-to-ppk">https://www.simplified.guide/putty/convert-ssh-key-to-ppk</a></p>

<p><a name="maldet"></a></p>

<h1 id="detecci√≥n-de-malware---maldet">Detecci√≥n de malware - maldet</h1>

<p>Instalaci√≥n y puesta en funcionamiento:</p>

<p><a href="https://codigonaranja.com/como-detectar-malware-en-tu-sitio-web-servidores-linux-ubuntu-debian">https://codigonaranja.com/como-detectar-malware-en-tu-sitio-web-servidores-linux-ubuntu-debian</a></p>

<p>Ve informes y reportes:</p>

<p><a href="https://wpbeaches.com/set-lmd-maldet-clamav-runcloud/">https://wpbeaches.com/set-lmd-maldet-clamav-runcloud/</a></p>

<p>Escaneo manual:</p>

<p><a href="https://www.nosolocodigo.com/linux-malware-detect-escaner-para-aplicaciones-web-open-source/">https://www.nosolocodigo.com/linux-malware-detect-escaner-para-aplicaciones-web-open-source/</a></p>

<p><a name="postfix"></a></p>

<h1 id="instalaci√≥n-y-configuraci√≥n-de-postfix-para-usar-el-smtp-de-gmail">Instalaci√≥n y configuraci√≥n de Postfix para usar el SMTP de Gmail</h1>

<p><a href="http://somebooks.es/configurar-postfix-para-usar-el-smtp-de-gmail-en-ubuntu-20-04-lts/">http://somebooks.es/configurar-postfix-para-usar-el-smtp-de-gmail-en-ubuntu-20-04-lts/</a></p>

<p><a href="https://www.fosstechnix.com/how-to-configure-postfix-with-gmail-on-ubuntu/">https://www.fosstechnix.com/how-to-configure-postfix-with-gmail-on-ubuntu/</a></p>

<p>Email alias para usuarios:</p>

<p><a href="https://www.cyberciti.biz/tips/how-to-redirect-one-users-mail-to-another-user-with-postfix.html">https://www.cyberciti.biz/tips/how-to-redirect-one-users-mail-to-another-user-with-postfix.html</a></p>

<p>Resoluci√≥n al error en el certificado:</p>

<p><a href="https://github.com/rancher/rancher/issues/4293">https://github.com/rancher/rancher/issues/4293</a></p>

<p><a name="cpu"></a></p>

<h1 id="notificaci√≥n-por-email-si-cpu-supera-el-80">Notificaci√≥n por email si CPU supera el 80%</h1>

<p><a href="https://www.2daygeek.com/linux-shell-script-to-monitor-cpu-utilization-usage-and-send-email/">https://www.2daygeek.com/linux-shell-script-to-monitor-cpu-utilization-usage-and-send-email/</a></p>]]></content><author><name></name></author><category term="vps" /><category term="seguridad" /><category term="ssh" /><category term="postfix" /><category term="malware" /><summary type="html"><![CDATA[Apuntes de securizaci√≥n VPS: seguridad b√°sica, claves ssh, detecci√≥n malware, posfix...]]></summary></entry><entry><title type="html">Dockerizando VPS</title><link href="https://rarcos.com/es/2023/03/11/Dockerizando-VPS/" rel="alternate" type="text/html" title="Dockerizando VPS" /><published>2023-03-11T06:41:00+01:00</published><updated>2023-03-11T06:41:00+01:00</updated><id>https://rarcos.com/2023/03/11/Dockerizando%20VPS</id><content type="html" xml:base="https://rarcos.com/2023/03/11/Dockerizando-VPS/"><![CDATA[<p>He traspasado todas mis aplicaciones que ten√≠a en heroku a un vps propio y adem√°s he aprovechado para dockerizarlas todas, incluyendo bases de datos y otros servicios web. Concretamente he dockerizado:</p>
<ul>
  <li><a href="#cont-spring-boot">Spring Boot</a></li>
  <li><a href="#cont-laravel">Laravel</a></li>
  <li><a href="#cont-flask">Flask</a></li>
  <li><a href="#cont-nginx">Nginx</a></li>
  <li><a href="#cont-postgres">PostgreSQL</a></li>
  <li><a href="#cont-mysql">MySQL</a></li>
  <li><a href="#cont-mongo">MongoDB</a></li>
</ul>

<h1 id="instalaci√≥n-de-docker-en-el-vps">Instalaci√≥n de docker en el VPS</h1>

<p><strong>Docker</strong></p>

<p>En primer lugar he tenido que instalar docker y docker compose. Para la instalaci√≥n de docker en ubuntu 22.04 server :</p>

<p>Actualizamos la lista de paquetes del S.O. y actualizamos el S.O.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">apt update <span class="o">&amp;&amp;</span> apt upgrade</code></pre></figure>

<p>A√±adimos una serie de paquetes de requisitos previos.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">apt <span class="nb">install </span>apt-transport-https ca-certificates curl software-properties-common</code></pre></figure>

<p>Se agrega la clave GPG para el repositorio oficial de Docker a nuestro S.O.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">curl <span class="nt">-fsSL</span> https://download.docker.com/linux/ubuntu/gpg | apt-key add -</code></pre></figure>

<p>Y por √∫ltimo ya podremos a√±adir el repositorio a nuestro S.O. Podemos comprobar que se ha a√±adido una l√≠nea en /etc/apt/source.list.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">add-apt-repository <span class="s2">"deb [arch=amd64] https://download.docker.com/linux/ubuntu jammy stable"</span></code></pre></figure>

<p>Actualizamos la base de datos ya que hay una l√≠nea nueva (compruebe en el listado que sale) y comprobaremos antes de instalar que vamos a instalar desde el repositorio (y no desde Ubuntu Server).</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">apt update &amp; apt-cache policy docker-ce</code></pre></figure>

<p>Por √∫ltimo, podremos instalar el paquete (paquete pesado de aproximadamente 400 MBytes). Como no puede ser de otra manera hay que asegurar que Docker engine est√° arrancado y si reinicia el servicio en el arranque del S.O. anfitri√≥n.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">apt-get <span class="nb">install </span>docker-ce</code></pre></figure>

<p><em>Manualillo de systemctl</em></p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">systemctl disable Docker <span class="c"># deshabilitamos en el arranque el demonio docker </span>
systemctl list-unit-files | <span class="nb">grep </span>docker 
systemctl <span class="nb">enable </span>docker 
systemctl list-unit-files | <span class="nb">grep </span>docker 
systemctl stop docker <span class="o">&amp;&amp;</span> systemctl status Docker 
systemctl start docker <span class="o">&amp;&amp;</span> systemctl status Docker 
docker versi√≥n</code></pre></figure>

<p><em>Resoluci√≥n del problema de permisos de docker para un usuario no root</em></p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">sudo </span>groupadd docker
<span class="nb">sudo </span>usermod <span class="nt">-aG</span> docker mi_usuario
newgrp docker
docker ps</code></pre></figure>

<p><strong>Docker-Compose</strong></p>

<p>Actualizaci√≥n de la lista de repositorios</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">sudo </span>apt update</code></pre></figure>

<p>Instalaci√≥n de docker-compose</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">sudo </span>apt <span class="nb">install </span>docker-compose</code></pre></figure>

<p>Comprobamos el estado del servidor docker y las versiones respectivamente</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">systemctl status docker
docker <span class="nt">-v</span>
docker-compose <span class="nt">-version</span></code></pre></figure>

<h1 id="creaci√≥n-de-los-contenedores-y-docker-compose">Creaci√≥n de los contenedores y docker-compose</h1>

<p>En primer lugar me he creado una carpeta <em>docker</em> en el home, que ir√° alojando los scripts y ficheros necesarios. Tiene la siguiente estructura:</p>

<p><img src="/images/pages/docker-jerarquia.jpg" alt="docker-jerarquia.jpg" /></p>

<p>Vamos a utilizar para el certificado de autenticaci√≥n del servidor https <a href="https://letsencrypt.org/">Let‚Äôs encrypt</a>.</p>

<p><strong>Instalaci√≥n y generaci√≥n del certificado Let‚Äôs encrypt</strong></p>

<p>Para la instalaci√≥n de la aplicaci√≥n <em>certbot</em> de Let‚Äôs encrypt para generar los certificados, recomiendo seguir las instrucciones de la siguiente p√°gina <a href="https://certbot.eff.org/instructions?ws=other&amp;os=ubuntufocal">https://certbot.eff.org/instructions?ws=other&amp;os=ubuntufocal</a> est√° preseleccionado para Ubuntu server.</p>

<p>La p√°gina indicada anteriormente, es la √∫nica que funciona actualmente con Ubuntu Server 22.04, el resto de tutoriales que he visitado se encuentran obsoletos al haber cambiado a snap la aplicaci√≥n de certbot de Let‚Äôs encrypt y el repositorio de github ya no funciona tampoco como se esperaba en instrucciones antiguas.</p>

<p>Una vez terminado nos generar√° la siguiente salida:
<img src="/images/pages/certificado_letsencrypt.jpg" alt="salida_certificado_letsencrypt" /></p>

<p>Generamos el certificado que es v√°lido para tomcat .p12.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">openssl pkcs12 <span class="nt">-export</span> <span class="nt">-in</span> /etc/letsencrypt/live/mi_dominio_web/fullchain.pem <span class="nt">-inkey</span> /etc/letsencrypt/live/mi_dominio_web/privkey.pem <span class="nt">-out</span> springboot_letsencrypt.p12 <span class="nt">-name</span> bootalias <span class="nt">-CAfile</span> chain.pem <span class="nt">-caname</span> root</code></pre></figure>

<p><em>Recuerda cambiar las rutas por las tuyas</em></p>

<p><a name="cont-spring-boot"></a></p>

<p><strong>Contenedor para Spring Boot</strong></p>

<p>Copiamos los ficheros necesarios en nuestra carpeta de nuestro nuestra carpeta en el home de <em>/docker/docker-java/</em>: estando en la ra√≠z de esta el fichero .jar y .p12.</p>

<p><em>Generaci√≥n de los scripts de docker</em></p>

<p>En primer lugar, vamos a crear un <em>Dockerfile</em> para que contenga la imagen (para Ubuntu server) y realice la copia de los ficheros necesarios (el .jar y el certificado) hacia nuestro contenedor.</p>

<p>Dockerfile</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">FROM eclipse-temurin:17-jdk-alpine

ARG <span class="nv">JAR_FILE</span><span class="o">=</span><span class="k">*</span>.jar

COPY <span class="k">${</span><span class="nv">JAR_FILE</span><span class="k">}</span> my_proyect_compiled.jar
COPY my_cert_letsencrypt.p12 <span class="nb">.</span>

ENTRYPOINT <span class="o">[</span><span class="s2">"java"</span>,<span class="s2">"-jar"</span>,<span class="s2">"/my_proyect_compiled.jar"</span><span class="o">]</span></code></pre></figure>

<p><em>Tendremos que cambiar el nombre del certificado y del fichero del proyecto compilado .jar</em></p>

<p>En segundo lugar, vamos a crear el script de <em>docker-compose.yml</em> que crear√° nuestro servicio web y expondr√° el puerto 8443 por defecto.</p>

<p>docker-compose.yml</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">version: <span class="s1">'3.8'</span>
services:
  proyect_name:
    build: <span class="nb">.</span>
    container_name: <span class="s1">'proyect_name-spring-app'</span>
    restart: always
    ports:
      - <span class="s1">'8080:8080'</span>
      - <span class="s1">'8443:8443'</span></code></pre></figure>

<p><em>Tendremos que cambiar el nombre del servicio y del contenedor</em></p>

<p><em>Proyecto Spring Boot</em></p>

<p>Vamos a a√±adir al fichero <em>aplication.properties</em> la configuraci√≥n para que el servidor tomcat que crea Spring, escuche por el puerto https, que por defecto es el 8443 en lugar del 443. Y el certificado que hemos creado previamente para que nuestro servidor funcione con Let‚Äôs encrypt.</p>

<p>aplication.properties</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">server</span><span class="o">.</span><span class="na">port</span><span class="o">=</span><span class="mi">9443</span>
<span class="n">server</span><span class="o">.</span><span class="na">ssl</span><span class="o">.</span><span class="na">enabled</span><span class="o">=</span><span class="kc">true</span>
<span class="n">server</span><span class="o">.</span><span class="na">ssl</span><span class="o">.</span><span class="na">key</span><span class="o">-</span><span class="n">store</span><span class="o">=</span><span class="n">my_cert_letsencrypt</span><span class="o">.</span><span class="na">p12</span>
<span class="n">server</span><span class="o">.</span><span class="na">ssl</span><span class="o">.</span><span class="na">key</span><span class="o">-</span><span class="n">store</span><span class="o">-</span><span class="n">password</span><span class="o">=</span><span class="n">your_password</span>
<span class="n">server</span><span class="o">.</span><span class="na">ssl</span><span class="o">.</span><span class="na">keyStoreType</span><span class="o">=</span><span class="no">PKCS12</span>
<span class="n">server</span><span class="o">.</span><span class="na">ssl</span><span class="o">.</span><span class="na">keyAlias</span><span class="o">=</span><span class="n">your_alias</span></code></pre></figure>

<p><em>Tendremos que cambiar: el certificado, la contrase√±a y el alias con el que creamos anteriormente.</em></p>

<p>Generamos el fichero <em>.jar</em> mediante el comando de mvn para compilar</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">mvn package</code></pre></figure>

<p><em>Para ver la diferencia entre mvn package y mvn install, consulta este <a href="https://www.appsdeveloperblog.com/difference-between-mvn-package-and-mvn-install/">enlace</a></em></p>

<p>Ahora en la carpeta <em>/target</em> del proyecto tendremos el fichero <em>.jar</em> que pasaremos por ftp a nuestra carpeta en el home de <em>/docker/docker-java/nombre_aplicacion</em> que contendr√° a su vez los ficheros de <em>Dockerfile</em> y <em>docker-compose.yml</em>, junto a nuestro certificado <em>.p12</em>. Para que todo se pueda copiar en el contenedor de docker, seg√∫n las instrucciones de nuesto <em>Dockerfile</em>.</p>

<p>Finalmente, debemos tener la siguiente estructura de ficheros en la carpeta de docker:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">/docker-my_app
|-Dockerfile
|-docker-compose.yml
|-my_app.jar
|-my_cert.p12</code></pre></figure>

<p>En la p√°gina oficial del Spring Boot hay tambi√©n un tutorial que indica con mayor detalle lo realizado anteriormente <a href="https://spring.io/guides/topicals/spring-boot-docker/">https://spring.io/guides/topicals/spring-boot-docker/</a> incluyendo aspectos de seguridad como la creaci√≥n de un usuario diferente a root dentro del contenedor de docker.</p>

<p><a name="cont-laravel"></a></p>

<p><strong>Contenedor para Laravel</strong></p>

<p>Para Laravel vamos a utilizar un servidor ngnix con la √∫ltima versi√≥n por seguridad.
para ello crearemos varios ficheros que describir√© a continuaci√≥n:</p>

<p><em>Generaci√≥n de los scripts de docker</em></p>

<p>Dockerfile</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># imagen de dockerhub que descargara</span>
FROM php:8.2-fpm-alpine

<span class="c"># algunas configuraciones para que funcione el contenedor para mysql</span>
<span class="c">#RUN docker-php-ext-install pdo pdo_mysql</span>

<span class="c"># Install Postgre PDO</span>
RUN <span class="nb">set</span> <span class="nt">-ex</span> <span class="se">\</span>
  <span class="o">&amp;&amp;</span> apk <span class="nt">--no-cache</span> add <span class="se">\</span>
    postgresql-dev

RUN docker-php-ext-install pdo pdo_pgsql

<span class="c"># instala composer en el contenedor</span>
RUN curl <span class="nt">-sS</span> https://getcomposer.org/installer | php <span class="nt">--</span> <span class="nt">--install-dir</span><span class="o">=</span>/usr/local/bin <span class="nt">--filename</span><span class="o">=</span>composer

<span class="c"># da permisos para editar los archivos en esta ruta del container</span>
RUN <span class="nb">chown</span> <span class="nt">-R</span> www-data:www-data /var/www
RUN <span class="nb">chmod </span>755 /var/www</code></pre></figure>

<p>docker-compose.yml</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">version: <span class="s2">"3.3"</span>

<span class="c"># Servidor nginx</span>
services:
  nginx-laravel:
    image: nginx:latest
    restart: always
    ports:
      - <span class="s2">"10440:443"</span>
    volumes:
      - ./src:/var/www/html
      - ./src/storage:/var/www/html/storage
      - ./nginx.conf:/etc/nginx/conf.d/default.conf
      - /etc/letsencrypt/live/mi_dominio_web/fullchain.pem:/etc/nginx/ssl/fullchain.pem:ro
      - /etc/letsencrypt/live/mi_dominio_web/privkey.pem:/etc/nginx/ssl/privkey.pem:ro

    links:
      - php-laravel

  <span class="c"># Configuraci√≥n de php-fpm</span>
  php-laravel:
<span class="c">#    image: php:8-fpm</span>
    build: <span class="nb">.</span>
    restart: always
    volumes:
      - ./src:/var/www/html
<span class="c">#    command: sh -c "cd /var/www/html &amp;&amp; composer update nesbot/carbon"</span></code></pre></figure>

<p>nginx.conf</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">server <span class="o">{</span>
    listen 80<span class="p">;</span>
    listen <span class="o">[</span>::]:80<span class="p">;</span>
    listen 443 ssl<span class="p">;</span>
    server_name mi_ip www.mi_dominio mi_dominio localhost<span class="p">;</span>
    ssl_certificate /etc/nginx/ssl/fullchain.pem<span class="p">;</span>
    ssl_certificate_key /etc/nginx/ssl/privkey.pem<span class="p">;</span>

    <span class="c"># Redirect non-https traffic to https</span>
    <span class="k">if</span> <span class="o">(</span><span class="nv">$scheme</span> <span class="o">!=</span> <span class="s2">"https"</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return </span>301 https://<span class="nv">$host$request_uri</span><span class="p">;</span>
    <span class="o">}</span>

    <span class="c"># Log files for Debug</span>
    error_log  /var/log/nginx/error.log<span class="p">;</span>
    access_log /var/log/nginx/access.log<span class="p">;</span>

    <span class="c"># Laravel web root directory</span>
    root /var/www/html/public<span class="p">;</span>
    index index.php index.html<span class="p">;</span>

    location / <span class="o">{</span>
        try_files <span class="nv">$uri</span> <span class="nv">$uri</span>/ /index.php?<span class="nv">$query_string</span><span class="p">;</span>
        gzip_static on<span class="p">;</span>
    <span class="o">}</span>

    <span class="c"># Nginx Pass requests to PHP-FPM</span>
    location ~ <span class="se">\.</span>php<span class="nv">$ </span><span class="o">{</span>
        try_files <span class="nv">$uri</span> <span class="o">=</span>404<span class="p">;</span>
        fastcgi_split_path_info ^<span class="o">(</span>.+<span class="se">\.</span>php<span class="o">)(</span>/.+<span class="o">)</span><span class="nv">$;</span>
        fastcgi_pass php-laravel:9000<span class="p">;</span>
        fastcgi_index index.php<span class="p">;</span>
        include fastcgi_params<span class="p">;</span>
        fastcgi_param SCRIPT_FILENAME <span class="nv">$document_root$fastcgi_script_name</span><span class="p">;</span>
        fastcgi_param PATH_INFO <span class="nv">$fastcgi_path_info</span><span class="p">;</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p><em>Sustituye mi dominio mi_dominio por el tuyo</em></p>

<p>Finalmente, debemos tener la siguiente estructura de ficheros en la carpeta de docker:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">/docker-my_app
|-Dockerfile
|-docker-compose.yml
|-default.conf
|-nginx.conf
|-src</code></pre></figure>

<p>Y en la carpeta <em>src</em> vamos a copiar todo el contenido de Laravel.</p>

<p>Levantamos el contenedor de docker como demonio y con la compilaci√≥n activada</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">docker-compose up <span class="nt">--build</span> <span class="nt">-d</span></code></pre></figure>

<p>Con esto ya tenemos una versi√≥n de Laravel Dockerizada y funcionando.</p>

<p><a name="cont-flask"></a></p>

<p><strong>Contenedor para Flask</strong></p>

<p>Tenemos nuestra aplicaci√≥n python con flask en la carpeta <em>app</em> y los certificados en la carpeta <em>certs</em> y el fichero de <em>requirements</em> al mismo nivel que los de docker.</p>

<p><em>Generaci√≥n de los scripts de docker</em></p>

<p>Dockerfile</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">version: <span class="s1">'3.8'</span>

services:
  flask:
    restart: always
    build: <span class="nb">.</span>
    <span class="nb">command</span>: python app.py run <span class="nt">-h</span> 0.0.0.0
    volumes:
      - ./app:/usr/src/app/
    ports:
      - 10443:5000
    environment:
      - <span class="nv">FLASK_APP</span><span class="o">=</span>app.py
      - <span class="nv">FLASK_DEBUG</span><span class="o">=</span>1</code></pre></figure>

<p>nginx.conf</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">server <span class="o">{</span>
    listen 80<span class="p">;</span>
    listen <span class="o">[</span>::]:80<span class="p">;</span>
    listen 443 ssl<span class="p">;</span>
    server_name  www.mi_dominio_web mi_dominio_web<span class="p">;</span>
    ssl_certificate /etc/nginx/certs/fullchain.pem<span class="p">;</span>
    ssl_certificate_key /etc/nginx/certs/privkey.pem<span class="p">;</span>

    <span class="c"># Redirect non-https traffic to https</span>
    <span class="k">if</span> <span class="o">(</span><span class="nv">$scheme</span> <span class="o">!=</span> <span class="s2">"https"</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return </span>301 https://<span class="nv">$host$request_uri</span><span class="p">;</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>app.py</p>

<p><em>Sustituye mi dominio mi_dominio_web por el tuyo</em></p>

<p><a name="cont-nginx"></a></p>

<p><strong>Contenedor para Nginx</strong></p>

<p>Copiamos los ficheros necesarios en nuestra carpeta de nuestro nuestra carpeta en el home de <em>/docker/docker-ngnix/</em>: estando en la ra√≠z de esta el fichero <em>docker-compose.yml y nginx.conf</em>, las carpetas: <em>cers, site-content y templates</em>.</p>

<p><em>Generaci√≥n de los scripts de docker</em></p>

<p>docker-compose.yml</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">version: <span class="s2">"3.7"</span>
services:
  web:
    image: nginx
    volumes:
     - ./templates:/etc/nginx/templates
     - ./site-content:/etc/nginx/html
     - ./certs:/etc/nginx/certs:ro
     - ./nginx.conf:/etc/nginx/conf.d/nginx.conf

    ports:
     - <span class="s2">"80:80"</span>
     - <span class="s2">"443:443"</span></code></pre></figure>

<p><em>Generaci√≥n del script de configuraci√≥n de ngnix</em></p>

<p>nginx.conf</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">server <span class="o">{</span>
    listen 80<span class="p">;</span>
    listen <span class="o">[</span>::]:80<span class="p">;</span>
    listen 443 ssl<span class="p">;</span>
    server_name  www.mi_dominio_web mi_dominio_web<span class="p">;</span>
    ssl_certificate /etc/nginx/certs/fullchain.pem<span class="p">;</span>
    ssl_certificate_key /etc/nginx/certs/privkey.pem<span class="p">;</span>

    <span class="c"># Redirect non-https traffic to https</span>
    <span class="k">if</span> <span class="o">(</span><span class="nv">$scheme</span> <span class="o">!=</span> <span class="s2">"https"</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return </span>301 https://<span class="nv">$host$request_uri</span><span class="p">;</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p><em>Sustituye mi dominio mi_dominio_web por el tuyo</em></p>

<p><em>Generaci√≥n del resto de ficheros y carpetas</em></p>

<p>En la carpeta <em>certs</em> tienes que tener una copia de los ficheros generados por <em>certbot</em>, son los ficheros: <em>fullchain.pem y privkey.pem</em>.</p>

<p>En la carpeta <em>site-content</em> el <em>index.html</em> de tu web con todo su contenido. Este es un ejemplo de redirecci√≥n de mi p√°gina, por si te sirve de ejemplo.</p>

<p>site-content/index.html</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"es"</span><span class="nt">&gt;</span>

<span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"UTF-8"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"viewport"</span> <span class="na">content=</span><span class="s">"width=device-width, initial-scale=1.0"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">"X-UA-Compatible"</span> <span class="na">content=</span><span class="s">"ie=edge"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">"refresh"</span> <span class="na">content=</span><span class="s">"5;url=https://mi_dominio_web"</span><span class="nt">&gt;</span>
<span class="nt">&lt;/head&gt;</span>

<span class="nt">&lt;body&gt;</span>
<span class="nt">&lt;h1&gt;</span>Acceso no permitido<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;p&gt;</span>Va a ser redireccionado a la p√°gina <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"https://mi_dominio_web"</span><span class="nt">&gt;</span>https://mi_dominio_web<span class="nt">&lt;/a&gt;&lt;/p&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span></code></pre></figure>

<p><a name="cont-postgres"></a></p>

<p><strong>Contenedor para PostgreSQL</strong></p>

<p>La dockerizaci√≥n de PostgreSQL es una de las m√°s sencillas que hay, solamente tenemos que crear un docker-compose y levantar el contenedor.</p>

<p><em>Generaci√≥n del scripts de docker</em></p>

<p>docker-compose.yml</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">version: <span class="s1">'3.3'</span>
services:
  db:
    image: postgres
    restart: always
    container_name: postgresql
    environment:
      - <span class="nv">POSTGRES_USER</span><span class="o">=</span>mi_usuario
      - <span class="nv">POSTGRES_PASSWORD</span><span class="o">=</span>mi_contrase√±a
    ports:
      - <span class="s1">'mi_puerto_ext:5432'</span>
    volumes:
      - db:/var/lib/postgresql/data
volumes:
  db:
    driver: <span class="nb">local</span></code></pre></figure>

<p>En la carpeta <em>./db</em> que se crear√° autom√°ticamente tendremos todos los ficheros de la base de datos para poder consultar y/o modificar lo que necesitemos desde fuera del contenedor.</p>

<p><a name="cont-mysql"></a></p>

<p><strong>Contenedor para mySQL</strong></p>

<p>La dockerizaci√≥n de MySQL es una de las m√°s sencillas que hay, solamente tenemos que crear un docker-compose y levantar el contenedor.</p>

<p><em>Generaci√≥n del scripts de docker</em></p>

<p>docker-compose.yml</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">version: <span class="s1">'2.4'</span>
services:
  mariadb:
    image: mariadb
    container_name: mysql
    restart: always
    volumes:
      - ./db:/var/lib/mysql
    environment:
      TZ: Europe/Madrid
      <span class="c">#MYSQL_RANDOM_ROOT_PASSWORD: "yes"</span>
      MYSQL_ROOT_PASSWORD: mi_contrase√±a_root
      MYSQL_DATABASE: mi_nombre_bbdd
      MYSQL_USER: mi_usuario
      MYSQL_PASSWORD: mi_contrase√±a
    ports:
      - 23452:3306
    <span class="c">#healthcheck:</span>
      <span class="c">#test:  mysqladmin ping -h 127.0.0.1 -u root --password=$$MYSQL_ROOT_PASSWORD || exit 1</span>
      <span class="c">#test:  mysqladmin ping -h 127.0.0.1 -u $$MYSQL_USER --password=$$MYSQL_PASSWORD || exit 1</span>
      <span class="c">#interval: 60s</span>
      <span class="c">#timeout: 5s</span>
      <span class="c">#retries: 5</span>
      <span class="c">#start_period: 30s</span></code></pre></figure>

<p>En la carpeta <em>./db</em> que se crear√° autom√°ticamente tendremos todos los ficheros de la base de datos para poder consultar y/o modificar lo que necesitemos desde fuera del contenedor.</p>

<p><a name="cont-mongo"></a></p>

<p><strong>Contenedor para MongoDB</strong></p>

<p>La dockerizaci√≥n de MongoDB es una de las m√°s sencillas que hay, solamente tenemos que crear un docker-compose y levantar el contenedor.</p>

<p><em>Generaci√≥n del scripts de docker</em></p>

<p>docker-compose.yml</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">version: <span class="s1">'3.7'</span>
services:
  mongodb_container:
    image: mongo:latest
    ports:
      - mi_puerto_ext:27017
    volumes:
      - db:/data/db
volumes:
  db:</code></pre></figure>

<p>En la carpeta <em>./db</em> que se crear√° autom√°ticamente tendremos todos los ficheros de la base de datos para poder consultar y/o modificar lo que necesitemos desde fuera del contenedor.</p>

<hr />

<p><strong>Fuentes:</strong></p>

<p><a href="https://certbot.eff.org/instructions">https://certbot.eff.org/instructions</a></p>

<p><a href="https://wstutorial.com/rest/spring-boot-with-lets-encrypt.html">https://wstutorial.com/rest/spring-boot-with-lets-encrypt.html</a></p>

<p><a href="https://spring.io/guides/topicals/spring-boot-docker/">https://spring.io/guides/topicals/spring-boot-docker/</a></p>

<p><a href="https://awstip.com/run-nginx-in-a-docker-container-using-pre-generated-ssl-certificates-from-letsencrypt-b005ebce74ca">https://awstip.com/run-nginx-in-a-docker-container-using-pre-generated-ssl-certificates-from-letsencrypt-b005ebce74ca</a></p>]]></content><author><name></name></author><category term="docker" /><category term="docker-compose" /><category term="vps" /><category term="spring" /><category term="java" /><category term="php" /><category term="laravel" /><category term="flask" /><category term="python" /><summary type="html"><![CDATA[C√≥mo he dockerizado mi vps para alojar aplicaciones: spring, laravel, flask...y m√°s]]></summary></entry><entry><title type="html">Python - IA juego Hotel</title><link href="https://rarcos.com/es/2022/08/11/IA-Juego-Hotel/" rel="alternate" type="text/html" title="Python - IA juego Hotel" /><published>2022-08-11T16:33:28+02:00</published><updated>2022-08-11T16:33:28+02:00</updated><id>https://rarcos.com/2022/08/11/IA%20-%20Juego%20Hotel</id><content type="html" xml:base="https://rarcos.com/2022/08/11/IA-Juego-Hotel/"><![CDATA[<p>He realizado la creaci√≥n de un sistema de IA para aprendizaje de la decisi√≥n de compra para el juego del Hotel. Se trata de decidir si se compra o no en la casilla de <em>compra</em>, y predecir cual de las propiedades es mejor comprar.</p>

<h1 id="programa-generador-de-partidas">Programa generador de partidas</h1>

<p><strong>Generador de partidas</strong></p>

<p>En primer lugar he tenido que realizar una generador de partidas del juego del Hotel, para alimentar a la IA. Posteriormente he creado tambi√©n un jugador IA para comparar los resultados obtenidos tras el aprendizaje de la IA.</p>

<p><em>Generador de partidas aleatorio (juego Hotel, 4 jugadores):</em></p>

<p><a href="https://colab.research.google.com/drive/1KEqghfPGeuk9u5u8_s531CCb7869Hn3u"><img src="/images/pages/repository_small_colab.png" alt="Generador de partidas" /></a></p>

<p><strong>Dataset</strong></p>

<p>El conjunto de datos utilizado es el dataset de 500 partidas, pero se ha probado progresivamente de 10, 100, 500, 1000. No teniendo apenas diferencia en el aprendizaje entre el de 500 a 1000 partidas.</p>

<p><em>10 partidas - 100 partidas - 500 partidas - 1000 partidas</em></p>

<p><a href="https://github.com/rubenarcos2/ia-juego_hotel/raw/main/datasets/Diez_Partidas_Hotel.csv"><img src="/images/pages/repository_small_file.png" alt="Dataset 10 partidas" /></a>
<a href="https://github.com/rubenarcos2/ia-juego_hotel/raw/main/datasets/Cien_Partidas_Hotel.csv"><img src="/images/pages/repository_small_file.png" alt="Dataset 100 partidas" /></a>
<a href="https://github.com/rubenarcos2/ia-juego_hotel/raw/main/datasets/Quinientas_Partidas_Hotel_A.csv"><img src="/images/pages/repository_small_file.png" alt="Dataset 500 partidas" /></a>
<a href="https://github.com/rubenarcos2/ia-juego_hotel/raw/main/datasets/Mil_Partidas_Hotel.csv"><img src="/images/pages/repository_small_file.png" alt="Dataset 1000 partidas" /></a></p>

<h1 id="programa-de-ia">Programa de IA</h1>

<p>Tras alimentar con el dataset y realizar el EDA correspondiente, he procedido a probar los modelos predictivos de IA que podr√≠an ser m√°s recomendables debido a la casu√≠stica en la que nos encontramos. Tras descartar, los que dabamos valores totalmente fuera de lugar, han sido: Adaboost, Naives Bayes, Decision Tree, Random Forest, XGBoost y 3 modelos diferente de deep learning (LSTM, Neuronal b√°sica, Neuronal profunda).</p>

<p><strong>Evaluaci√≥n y resultados</strong></p>

<table>
  <tbody>
    <tr>
      <td><strong>Modelo predictivo</strong></td>
      <td><strong>Tasa acierto</strong></td>
      <td><strong>Tase error</strong> *</td>
      <td><strong>Accuracy</strong></td>
    </tr>
    <tr>
      <td>Naives Bayes (Smooth 1e-10)</td>
      <td>66%</td>
      <td>40%</td>
      <td>0.66662</td>
    </tr>
    <tr>
      <td>Naives Bayes (Smooth 1e-7)</td>
      <td>91%</td>
      <td>75%</td>
      <td>0.90729</td>
    </tr>
    <tr>
      <td>Naives Bayes (Smooth 1e-11)</td>
      <td>65%</td>
      <td>40%</td>
      <td>0.65114</td>
    </tr>
    <tr>
      <td>Adaboost</td>
      <td>2%</td>
      <td>100%</td>
      <td>0.96112</td>
    </tr>
    <tr>
      <td>Decision Tree</td>
      <td>2%</td>
      <td>63%</td>
      <td>0.96113</td>
    </tr>
    <tr>
      <td>Adaboost</td>
      <td>2%</td>
      <td>100%</td>
      <td>0.96011</td>
    </tr>
    <tr>
      <td>Adaboost</td>
      <td>2%</td>
      <td>78%</td>
      <td>0.95977</td>
    </tr>
  </tbody>
</table>

<p><em>*en los diferenetes a ‚Äòno compra‚Äô, es decir en la elecci√≥n de la propiedad</em></p>

<p>Para ver los detalles de la evaluaci√≥n y el programa de IA que contiene los resultados en :</p>

<p><a href="https://colab.research.google.com/drive/10rXkRiRnq59435RtOSICPrA1T2dXyxG6"><img src="/images/pages/repository_small_colab.png" alt="Programa IA" /></a></p>

<p><strong>Jugadores vs IA</strong></p>

<p>El resultado es que gana la IA entre un 40%-47% de las veces.</p>

<p>Para ver el programa que evalua la partida de jugadores aleatorios vs IA:</p>

<p><a href="https://colab.research.google.com/drive/1c-ozdgzMSYzZD2el46knjWx0SRIi-hMC"><img src="/images/pages/repository_small_colab.png" alt="Programa Jugadores vs IA" /></a></p>

<p>Los resultado de las partidas se encuentran aqu√≠:</p>

<p><em>10 partidas - 100 partidas</em></p>

<p><a href="https://raw.githubusercontent.com/rubenarcos2/ia-juego_hotel/main/jugador_partidas_vs_ia/Diez_Partidas_Hotel-Jugadores_vs_IA.csv"><img src="/images/pages/repository_small_file.png" alt="Dataset 10 partidas" /></a>
<a href="https://github.com/rubenarcos2/ia-juego_hotel/raw/main/jugador_partidas_vs_ia/Cien_Partidas_Hotel-Jugadores_vs_IA.csv"><img src="/images/pages/repository_small_file.png" alt="Dataset 100 partidas" /></a></p>

<h1 id="programa-de-predicci√≥n">Programa de predicci√≥n</h1>

<p>He realizado en flask el programa de predicci√≥n, importando el modelo ya entrenado con <em>pickle</em> y creado un formulario web para la introducci√≥n de los datos necesarios para la predicci√≥n.</p>

<p><a href="https://vps.rarcos.com:10446/">Aplicaci√≥n web - https://vps.rarcos.com:10446/</a></p>

<hr />

<p>Si quieres ver el resultado de todo, te recomiendo visites:</p>

<p><em>Repositorio con el contenido</em></p>

<p><em>Repositorio - Generador - Prog. IA - Jugadores vs IA</em></p>

<p><a href="https://github.com/rubenarcos2/ia-juego_hotel"><img src="/images/pages/repository_small.png" alt="Repositorio" /></a>
<a href="https://colab.research.google.com/drive/1KEqghfPGeuk9u5u8_s531CCb7869Hn3u"><img src="/images/pages/repository_small_colab.png" alt="Generador de partidas" /></a>
<a href="https://colab.research.google.com/drive/10rXkRiRnq59435RtOSICPrA1T2dXyxG6"><img src="/images/pages/repository_small_colab.png" alt="Programa IA" /></a>
<a href="https://colab.research.google.com/drive/1c-ozdgzMSYzZD2el46knjWx0SRIi-hMC"><img src="/images/pages/repository_small_colab.png" alt="Programa Jugadores vs IA" /></a></p>]]></content><author><name></name></author><category term="python" /><category term="naives bayes" /><category term="ia" /><category term="colab" /><summary type="html"><![CDATA[Creaci√≥n de un sistema de IA para aprendizaje de la decisi√≥n de compra para el juego del Hotel]]></summary></entry><entry><title type="html">JS Vanilla MVC - Spring API rest</title><link href="https://rarcos.com/es/2022/07/23/Vanilla-JS-MVC-Spring-API-rest/" rel="alternate" type="text/html" title="JS Vanilla MVC - Spring API rest" /><published>2022-07-23T16:33:28+02:00</published><updated>2022-07-23T16:33:28+02:00</updated><id>https://rarcos.com/2022/07/23/Vanilla%20JS%20MVC%20-%20Spring%20API%20rest</id><content type="html" xml:base="https://rarcos.com/2022/07/23/Vanilla-JS-MVC-Spring-API-rest/"><![CDATA[<h1 id="js-vanilla-mvc---spring-api-rest">JS Vanilla MVC - Spring API rest</h1>

<p>Desarrollo de una app en JS Vanilla con MVC para consumir una api rest en Spring Boot.</p>

<p>Esta es la demostraci√≥n de la aplicaci√≥n que he realizado (click <a href="/es/WorkspaceWeb/JSconsumeAPI">aqu√≠</a> o en la imagen):</p>

<p><a href="/es/WorkspaceWeb/JSconsumeAPI"><img src="/images/pages/api_rest.png" alt="Ir a ver la app en funcionamiento" /></a></p>

<hr />

<p><em>Repositorio con el contenido</em></p>

<p><a href="https://github.com/rubenarcos2/spring-boot-api_rest"><img src="/images/pages/repository_small.png" alt="Repositorio" /></a>
Servidor
<a href="https://github.com/rubenarcos2/js-vanilla-api-client"><img src="/images/pages/repository_small.png" alt="Repositorio" /></a>
Cliente</p>

<hr />

<p><strong>Fuentes:</strong></p>]]></content><author><name></name></author><category term="spring" /><category term="MVC" /><category term="js" /><category term="vanilla js" /><category term="api" /><summary type="html"><![CDATA[Desarrollo de una app en JS Vanilla con MVC para consumir una api rest en Spring Boot]]></summary></entry><entry><title type="html">C# + Arduino - Detector mute</title><link href="https://rarcos.com/es/2022/07/23/C-+-Arduino-Detector-mute/" rel="alternate" type="text/html" title="C# + Arduino - Detector mute" /><published>2022-07-23T16:33:28+02:00</published><updated>2022-07-23T16:33:28+02:00</updated><id>https://rarcos.com/2022/07/23/C#%20+%20Arduino%20-%20Detector%20mute</id><content type="html" xml:base="https://rarcos.com/2022/07/23/C-+-Arduino-Detector-mute/"><![CDATA[<h1 id="c--arduino---detector-mute-micr√≥fono-y-webcam-en-uso">C# + Arduino - Detector mute micr√≥fono y webcam en uso</h1>

<p>Desarrollo de una app en C# que se comunique con Arduino para la detecci√≥n del micr√≥fono, el estado muteado y la activaci√≥n de la webcam.</p>

<p><img src="/images/pages/arduino_c_sharp_detect_mute.jpg" alt="app en funcionamiento" /></p>

<p><img src="/images/pages/detector_mute_cam.jpg" alt="soporte iot" /></p>

<p>El c√≥digo de C#:</p>

<figure class="highlight"><pre><code class="language-c" data-lang="c"><span class="n">using</span> <span class="n">System</span><span class="p">;</span>
<span class="n">using</span> <span class="n">System</span><span class="p">.</span><span class="n">Linq</span><span class="p">;</span>
<span class="n">using</span> <span class="n">System</span><span class="p">.</span><span class="n">Windows</span><span class="p">.</span><span class="n">Forms</span><span class="p">;</span>
<span class="n">using</span> <span class="n">System</span><span class="p">.</span><span class="n">IO</span><span class="p">.</span><span class="n">Ports</span><span class="p">;</span>
<span class="n">using</span> <span class="n">NAudio</span><span class="p">.</span><span class="n">CoreAudioApi</span><span class="p">;</span>
<span class="n">using</span> <span class="n">Microsoft</span><span class="p">.</span><span class="n">Win32</span><span class="p">;</span>
<span class="n">using</span> <span class="n">System</span><span class="p">.</span><span class="n">Threading</span><span class="p">;</span>

<span class="n">namespace</span> <span class="n">ArduinoComunicacionSerie</span>
<span class="p">{</span>
    <span class="n">public</span> <span class="n">partial</span> <span class="n">class</span> <span class="n">frmMain</span> <span class="o">:</span> <span class="n">Form</span>
    <span class="p">{</span>
        <span class="n">System</span><span class="p">.</span><span class="n">IO</span><span class="p">.</span><span class="n">Ports</span><span class="p">.</span><span class="n">SerialPort</span> <span class="n">ArduinoPort</span><span class="p">;</span>
        <span class="n">public</span> <span class="n">MMDeviceCollection</span> <span class="n">devices</span><span class="p">;</span>
        <span class="n">public</span> <span class="kt">int</span> <span class="n">deviceSelected</span><span class="p">;</span>
        <span class="n">public</span> <span class="n">bool</span> <span class="n">toogleMuted</span><span class="p">;</span>
        <span class="n">public</span> <span class="n">bool</span> <span class="n">toogleCamera</span><span class="p">;</span>

        <span class="n">public</span> <span class="n">frmMain</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">InitializeComponent</span><span class="p">();</span>
            <span class="n">timerChangeStatus</span><span class="p">.</span><span class="n">Stop</span><span class="p">();</span>

            <span class="n">MMDeviceEnumerator</span> <span class="n">en</span> <span class="o">=</span> <span class="n">new</span> <span class="n">MMDeviceEnumerator</span><span class="p">();</span>
            <span class="n">devices</span> <span class="o">=</span> <span class="n">en</span><span class="p">.</span><span class="n">EnumerateAudioEndPoints</span><span class="p">(</span><span class="n">DataFlow</span><span class="p">.</span><span class="n">All</span><span class="p">,</span> <span class="n">DeviceState</span><span class="p">.</span><span class="n">Active</span><span class="p">);</span>

            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">devices</span><span class="p">.</span><span class="n">Count</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="c1">//Console.WriteLine(devices[i].ToString());</span>
                <span class="n">cmbDevices</span><span class="p">.</span><span class="n">Items</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">devices</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">ToString</span><span class="p">());</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">devices</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">ToString</span><span class="p">().</span><span class="n">Contains</span><span class="p">(</span><span class="s">"Micr√≥fono"</span><span class="p">))</span> <span class="p">{</span> <span class="n">cmbDevices</span><span class="p">.</span><span class="n">SelectedIndex</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span> <span class="n">deviceSelected</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span> <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="n">private</span> <span class="kt">void</span> <span class="n">onLoadFrm</span><span class="p">(</span><span class="n">object</span> <span class="n">sender</span><span class="p">,</span> <span class="n">EventArgs</span> <span class="n">e</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">try</span>
            <span class="p">{</span>
                <span class="n">ArduinoPort</span> <span class="o">=</span> <span class="n">new</span> <span class="n">SerialPort</span><span class="p">();</span>
                <span class="n">ArduinoPort</span><span class="p">.</span><span class="n">PortName</span> <span class="o">=</span> <span class="s">"COM4"</span><span class="p">;</span>
                <span class="n">ArduinoPort</span><span class="p">.</span><span class="n">BaudRate</span> <span class="o">=</span> <span class="mi">9600</span><span class="p">;</span>
                <span class="n">ArduinoPort</span><span class="p">.</span><span class="n">DataReceived</span> <span class="o">+=</span> <span class="n">new</span> <span class="n">SerialDataReceivedEventHandler</span><span class="p">(</span><span class="n">arduinoReceivedSerial</span><span class="p">);</span>
                <span class="n">ArduinoPort</span><span class="p">.</span><span class="n">Open</span><span class="p">();</span>
                <span class="n">timerChangeStatus</span><span class="p">.</span><span class="n">Start</span><span class="p">();</span>
                <span class="n">chkToogleWebcam</span><span class="p">.</span><span class="n">Checked</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="n">catch</span> <span class="p">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">ex</span><span class="p">.</span><span class="n">Message</span><span class="p">);</span>
                <span class="n">MessageBox</span><span class="p">.</span><span class="n">Show</span><span class="p">(</span><span class="s">"Conecte Arduino e inicie de nuevo la aplicaci√≥n"</span><span class="p">,</span> <span class="s">"No est√° conectado Arduino"</span><span class="p">);</span>
                <span class="n">timerChangeStatus</span><span class="p">.</span><span class="n">Stop</span><span class="p">();</span>
                <span class="n">this</span><span class="p">.</span><span class="n">Close</span><span class="p">();</span>
            <span class="p">}</span>

        <span class="p">}</span>

        <span class="n">private</span> <span class="kt">void</span> <span class="n">arduinoReceivedSerial</span><span class="p">(</span><span class="n">object</span> <span class="n">sender</span><span class="p">,</span> <span class="n">SerialDataReceivedEventArgs</span> <span class="n">e</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">EventType</span> <span class="o">==</span> <span class="n">SerialData</span><span class="p">.</span><span class="n">Chars</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="kt">int</span> <span class="n">input</span> <span class="o">=</span> <span class="n">ArduinoPort</span><span class="p">.</span><span class="n">ReadChar</span><span class="p">();</span>
                <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">input</span><span class="p">);</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">input</span><span class="p">.</span><span class="n">Equals</span><span class="p">(</span><span class="sc">'z'</span><span class="p">))</span>
                <span class="p">{</span>
                    <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">"***** CONNECTED *****"</span><span class="p">);</span>
                <span class="p">}</span>

                <span class="k">if</span> <span class="p">(</span><span class="n">input</span><span class="p">.</span><span class="n">Equals</span><span class="p">(</span><span class="sc">'g'</span><span class="p">))</span>
                <span class="p">{</span>
                    <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">"***** BUTTON PRESSED MICRO *****"</span><span class="p">);</span>
                    <span class="n">MMDeviceEnumerator</span> <span class="n">en</span> <span class="o">=</span> <span class="n">new</span> <span class="n">MMDeviceEnumerator</span><span class="p">();</span>
                    <span class="n">var</span> <span class="n">devices</span> <span class="o">=</span> <span class="n">en</span><span class="p">.</span><span class="n">EnumerateAudioEndPoints</span><span class="p">(</span><span class="n">DataFlow</span><span class="p">.</span><span class="n">All</span><span class="p">,</span> <span class="n">DeviceState</span><span class="p">.</span><span class="n">Active</span><span class="p">);</span>
                    <span class="n">toogleMuted</span> <span class="o">=</span> <span class="o">!</span><span class="n">toogleMuted</span><span class="p">;</span>
                    <span class="n">devices</span><span class="p">[</span><span class="n">deviceSelected</span><span class="p">].</span><span class="n">AudioSessionManager</span><span class="p">.</span><span class="n">AudioSessionControl</span><span class="p">.</span><span class="n">SimpleAudioVolume</span><span class="p">.</span><span class="n">Mute</span> <span class="o">=</span> <span class="n">toogleMuted</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">input</span><span class="p">.</span><span class="n">Equals</span><span class="p">(</span><span class="sc">'h'</span><span class="p">))</span>
                <span class="p">{</span>
                    <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">"***** BUTTON PRESSED CAMERA *****"</span><span class="p">);</span>
                    <span class="n">RegistryKey</span> <span class="n">key</span> <span class="o">=</span> <span class="n">Registry</span><span class="p">.</span><span class="n">CurrentUser</span><span class="p">.</span><span class="n">OpenSubKey</span><span class="p">(</span><span class="err">@</span><span class="s">"Software\Microsoft\Windows\CurrentVersion\CapabilityAccessManager\ConsentStore\webcam"</span><span class="p">,</span> <span class="nb">true</span><span class="p">);</span>
                    <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">key</span><span class="p">);</span>
                    <span class="n">toogleCamera</span> <span class="o">=</span> <span class="o">!</span><span class="n">toogleCamera</span><span class="p">;</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">toogleCamera</span><span class="p">)</span>
                    <span class="p">{</span>
                        <span class="c1">//adding/editing a value </span>
                        <span class="n">key</span><span class="p">.</span><span class="n">SetValue</span><span class="p">(</span><span class="s">"Value"</span><span class="p">,</span> <span class="s">"Allow"</span><span class="p">);</span>
                    <span class="p">}</span>
                    <span class="k">else</span>
                    <span class="p">{</span>
                        <span class="n">key</span><span class="p">.</span><span class="n">SetValue</span><span class="p">(</span><span class="s">"Value"</span><span class="p">,</span> <span class="s">"Deny"</span><span class="p">);</span>
                    <span class="p">}</span>
                    <span class="n">key</span><span class="p">.</span><span class="n">Close</span><span class="p">();</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="n">private</span> <span class="kt">void</span> <span class="n">chkToogleMute_CheckedChanged</span><span class="p">(</span><span class="n">object</span> <span class="n">sender</span><span class="p">,</span> <span class="n">EventArgs</span> <span class="n">e</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">MMDeviceEnumerator</span> <span class="n">en</span> <span class="o">=</span> <span class="n">new</span> <span class="n">MMDeviceEnumerator</span><span class="p">();</span>
            <span class="n">var</span> <span class="n">devices</span> <span class="o">=</span> <span class="n">en</span><span class="p">.</span><span class="n">EnumerateAudioEndPoints</span><span class="p">(</span><span class="n">DataFlow</span><span class="p">.</span><span class="n">All</span><span class="p">,</span> <span class="n">DeviceState</span><span class="p">.</span><span class="n">Active</span><span class="p">);</span>
            <span class="n">toogleMuted</span> <span class="o">=</span> <span class="n">chkToogleMute</span><span class="p">.</span><span class="n">Checked</span><span class="p">;</span>
            <span class="n">devices</span><span class="p">[</span><span class="n">cmbDevices</span><span class="p">.</span><span class="n">SelectedIndex</span><span class="p">].</span><span class="n">AudioSessionManager</span><span class="p">.</span><span class="n">AudioSessionControl</span><span class="p">.</span><span class="n">SimpleAudioVolume</span><span class="p">.</span><span class="n">Mute</span> <span class="o">=</span> <span class="n">toogleMuted</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="n">private</span> <span class="kt">void</span> <span class="n">chkToogleWebcam_CheckedChanged</span><span class="p">(</span><span class="n">object</span> <span class="n">sender</span><span class="p">,</span> <span class="n">EventArgs</span> <span class="n">e</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">toogleCamera</span> <span class="o">=</span> <span class="n">chkToogleWebcam</span><span class="p">.</span><span class="n">Checked</span><span class="p">;</span>

            <span class="n">RegistryKey</span> <span class="n">key</span> <span class="o">=</span> <span class="n">Registry</span><span class="p">.</span><span class="n">CurrentUser</span><span class="p">.</span><span class="n">OpenSubKey</span><span class="p">(</span><span class="err">@</span><span class="s">"Software\Microsoft\Windows\CurrentVersion\CapabilityAccessManager\ConsentStore\webcam"</span><span class="p">,</span> <span class="nb">true</span><span class="p">);</span>
            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">key</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">chkToogleWebcam</span><span class="p">.</span><span class="n">Checked</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="c1">//adding/editing a value </span>
                <span class="n">key</span><span class="p">.</span><span class="n">SetValue</span><span class="p">(</span><span class="s">"Value"</span><span class="p">,</span> <span class="s">"Allow"</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span>
            <span class="p">{</span>
                <span class="n">key</span><span class="p">.</span><span class="n">SetValue</span><span class="p">(</span><span class="s">"Value"</span><span class="p">,</span> <span class="s">"Deny"</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="n">key</span><span class="p">.</span><span class="n">Close</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="n">private</span> <span class="kt">void</span> <span class="n">frmMain_FormClosing</span><span class="p">(</span><span class="n">object</span> <span class="n">sender</span><span class="p">,</span> <span class="n">FormClosingEventArgs</span> <span class="n">e</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">ArduinoPort</span><span class="p">.</span><span class="n">IsOpen</span><span class="p">)</span> <span class="n">ArduinoPort</span><span class="p">.</span><span class="n">Close</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="n">private</span> <span class="kt">void</span> <span class="n">timerChangeStatus_Tick</span><span class="p">(</span><span class="n">object</span> <span class="n">sender</span><span class="p">,</span> <span class="n">EventArgs</span> <span class="n">e</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">chkToogleMute</span><span class="p">.</span><span class="n">Checked</span> <span class="o">=</span> <span class="n">toogleMuted</span><span class="p">;</span>
            <span class="n">chkToogleWebcam</span><span class="p">.</span><span class="n">Checked</span> <span class="o">=</span> <span class="n">toogleCamera</span><span class="p">;</span>

            <span class="n">try</span>
            <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">cmbDevices</span><span class="p">.</span><span class="n">SelectedItem</span> <span class="o">!=</span> <span class="n">null</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">"Mute      : "</span> <span class="o">+</span> <span class="n">devices</span><span class="p">[</span><span class="n">cmbDevices</span><span class="p">.</span><span class="n">SelectedIndex</span><span class="p">].</span><span class="n">AudioSessionManager</span><span class="p">.</span><span class="n">AudioSessionControl</span><span class="p">.</span><span class="n">SimpleAudioVolume</span><span class="p">.</span><span class="n">Mute</span><span class="p">);</span>
                    <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">"Webcam    : "</span> <span class="o">+</span> <span class="n">IsWebCamInUse</span><span class="p">());</span>
                    <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">"Microphone: "</span> <span class="o">+</span> <span class="n">IsMicrophoneInUse</span><span class="p">());</span>

                    <span class="k">if</span> <span class="p">(</span><span class="n">IsWebCamInUse</span><span class="p">())</span>
                    <span class="p">{</span>
                        <span class="n">chkCamera</span><span class="p">.</span><span class="n">Checked</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
                        <span class="n">ArduinoPort</span><span class="p">.</span><span class="n">Write</span><span class="p">(</span><span class="s">"e"</span><span class="p">);</span>
                    <span class="p">}</span>
                    <span class="k">else</span>
                    <span class="p">{</span>
                        <span class="n">chkCamera</span><span class="p">.</span><span class="n">Checked</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
                        <span class="n">ArduinoPort</span><span class="p">.</span><span class="n">Write</span><span class="p">(</span><span class="s">"f"</span><span class="p">);</span>
                    <span class="p">}</span>

                    <span class="k">if</span> <span class="p">(</span><span class="n">IsMicrophoneInUse</span><span class="p">())</span>
                    <span class="p">{</span>
                        <span class="n">chkMicrophone</span><span class="p">.</span><span class="n">Checked</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
                        <span class="n">ArduinoPort</span><span class="p">.</span><span class="n">Write</span><span class="p">(</span><span class="s">"a"</span><span class="p">);</span>
                    <span class="p">}</span>
                    <span class="k">else</span>
                    <span class="p">{</span>
                        <span class="n">chkMicrophone</span><span class="p">.</span><span class="n">Checked</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
                        <span class="n">ArduinoPort</span><span class="p">.</span><span class="n">Write</span><span class="p">(</span><span class="s">"b"</span><span class="p">);</span>
                    <span class="p">}</span>

                    <span class="k">if</span> <span class="p">(</span><span class="n">devices</span><span class="p">[</span><span class="n">cmbDevices</span><span class="p">.</span><span class="n">SelectedIndex</span><span class="p">].</span><span class="n">AudioSessionManager</span><span class="p">.</span><span class="n">AudioSessionControl</span><span class="p">.</span><span class="n">SimpleAudioVolume</span><span class="p">.</span><span class="n">Mute</span><span class="p">)</span>
                    <span class="p">{</span>
                        <span class="n">chkMicroMute</span><span class="p">.</span><span class="n">Checked</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
                        <span class="n">ArduinoPort</span><span class="p">.</span><span class="n">Write</span><span class="p">(</span><span class="s">"c"</span><span class="p">);</span>
                    <span class="p">}</span>
                    <span class="k">else</span>
                    <span class="p">{</span>
                        <span class="n">chkMicroMute</span><span class="p">.</span><span class="n">Checked</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
                        <span class="n">ArduinoPort</span><span class="p">.</span><span class="n">Write</span><span class="p">(</span><span class="s">"d"</span><span class="p">);</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span><span class="n">catch</span><span class="p">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">timerChangeStatus</span><span class="p">.</span><span class="n">Stop</span><span class="p">();</span>
                <span class="n">MessageBox</span><span class="p">.</span><span class="n">Show</span><span class="p">(</span><span class="s">"Se ha perdido la conexi√≥n con Arduino</span><span class="se">\n</span><span class="s">Vuelve a abrir la aplicaci√≥n una vez est√© solucionado."</span><span class="p">,</span> <span class="s">"Comprueba la conexi√≥n con Arduino"</span><span class="p">);</span>
                <span class="n">this</span><span class="p">.</span><span class="n">Close</span><span class="p">();</span>
            <span class="p">}</span>


        <span class="p">}</span>

        <span class="n">private</span> <span class="n">bool</span> <span class="n">IsWebCamInUse</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">using</span> <span class="p">(</span><span class="n">var</span> <span class="n">key</span> <span class="o">=</span> <span class="n">Registry</span><span class="p">.</span><span class="n">CurrentUser</span><span class="p">.</span><span class="n">OpenSubKey</span><span class="p">(</span><span class="err">@</span><span class="s">"SOFTWARE\Microsoft\Windows\CurrentVersion\CapabilityAccessManager\ConsentStore\webcam\NonPackaged"</span><span class="p">))</span>
            <span class="p">{</span>
                <span class="n">foreach</span> <span class="p">(</span><span class="n">var</span> <span class="n">subKeyName</span> <span class="n">in</span> <span class="n">key</span><span class="p">.</span><span class="n">GetSubKeyNames</span><span class="p">())</span>
                <span class="p">{</span>
                    <span class="n">using</span> <span class="p">(</span><span class="n">var</span> <span class="n">subKey</span> <span class="o">=</span> <span class="n">key</span><span class="p">.</span><span class="n">OpenSubKey</span><span class="p">(</span><span class="n">subKeyName</span><span class="p">))</span>
                    <span class="p">{</span>
                        <span class="k">if</span> <span class="p">(</span><span class="n">subKey</span><span class="p">.</span><span class="n">GetValueNames</span><span class="p">().</span><span class="n">Contains</span><span class="p">(</span><span class="s">"LastUsedTimeStop"</span><span class="p">))</span>
                        <span class="p">{</span>
                            <span class="n">var</span> <span class="n">endTime</span> <span class="o">=</span> <span class="n">subKey</span><span class="p">.</span><span class="n">GetValue</span><span class="p">(</span><span class="s">"LastUsedTimeStop"</span><span class="p">)</span> <span class="n">is</span> <span class="kt">long</span> <span class="o">?</span> <span class="p">(</span><span class="kt">long</span><span class="p">)</span><span class="n">subKey</span><span class="p">.</span><span class="n">GetValue</span><span class="p">(</span><span class="s">"LastUsedTimeStop"</span><span class="p">)</span> <span class="o">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
                            <span class="k">if</span> <span class="p">(</span><span class="n">endTime</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span>
                            <span class="p">{</span>
                                <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
                            <span class="p">}</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="n">private</span> <span class="n">bool</span> <span class="n">IsMicrophoneInUse</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">using</span> <span class="p">(</span><span class="n">var</span> <span class="n">key</span> <span class="o">=</span> <span class="n">Registry</span><span class="p">.</span><span class="n">CurrentUser</span><span class="p">.</span><span class="n">OpenSubKey</span><span class="p">(</span><span class="err">@</span><span class="s">"SOFTWARE\Microsoft\Windows\CurrentVersion\CapabilityAccessManager\ConsentStore\microphone\NonPackaged"</span><span class="p">))</span>
            <span class="p">{</span>
                <span class="n">foreach</span> <span class="p">(</span><span class="n">var</span> <span class="n">subKeyName</span> <span class="n">in</span> <span class="n">key</span><span class="p">.</span><span class="n">GetSubKeyNames</span><span class="p">())</span>
                <span class="p">{</span>
                    <span class="n">using</span> <span class="p">(</span><span class="n">var</span> <span class="n">subKey</span> <span class="o">=</span> <span class="n">key</span><span class="p">.</span><span class="n">OpenSubKey</span><span class="p">(</span><span class="n">subKeyName</span><span class="p">))</span>
                    <span class="p">{</span>
                        <span class="k">if</span> <span class="p">(</span><span class="n">subKey</span><span class="p">.</span><span class="n">GetValueNames</span><span class="p">().</span><span class="n">Contains</span><span class="p">(</span><span class="s">"LastUsedTimeStop"</span><span class="p">))</span>
                        <span class="p">{</span>
                            <span class="n">var</span> <span class="n">endTime</span> <span class="o">=</span> <span class="n">subKey</span><span class="p">.</span><span class="n">GetValue</span><span class="p">(</span><span class="s">"LastUsedTimeStop"</span><span class="p">)</span> <span class="n">is</span> <span class="kt">long</span> <span class="o">?</span> <span class="p">(</span><span class="kt">long</span><span class="p">)</span><span class="n">subKey</span><span class="p">.</span><span class="n">GetValue</span><span class="p">(</span><span class="s">"LastUsedTimeStop"</span><span class="p">)</span> <span class="o">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
                            <span class="k">if</span> <span class="p">(</span><span class="n">endTime</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span>
                            <span class="p">{</span>
                                <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
                            <span class="p">}</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
        <span class="p">}</span>

    <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>El c√≥digo de Arduino:</p>

<figure class="highlight"><pre><code class="language-c" data-lang="c"><span class="k">const</span> <span class="kt">int</span> <span class="n">pinLEDMicUso</span>  <span class="o">=</span> <span class="mi">16</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">pinLEDMicMute</span> <span class="o">=</span> <span class="mi">12</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">pinLEDCamUso</span>  <span class="o">=</span> <span class="mi">14</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">pinBTNMicMute</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">pinBTNCamMute</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>

<span class="kt">int</span> <span class="n">btnMicMute</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">btnCamMute</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span>
<span class="p">{</span>
  <span class="n">Serial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">9600</span><span class="p">);</span>
  <span class="n">pinMode</span><span class="p">(</span><span class="n">pinLEDMicUso</span><span class="p">,</span> <span class="n">OUTPUT</span><span class="p">);</span>
  <span class="n">pinMode</span><span class="p">(</span><span class="n">pinLEDMicMute</span><span class="p">,</span> <span class="n">OUTPUT</span><span class="p">);</span>
  <span class="n">pinMode</span><span class="p">(</span><span class="n">pinLEDCamUso</span><span class="p">,</span> <span class="n">OUTPUT</span><span class="p">);</span>
  <span class="n">pinMode</span><span class="p">(</span><span class="n">pinBTNMicMute</span><span class="p">,</span> <span class="n">INPUT</span><span class="p">);</span>
  <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="sc">'z'</span><span class="p">);</span> <span class="c1">//Conectado</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">Serial</span><span class="p">.</span><span class="n">available</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="kt">int</span> <span class="n">option</span> <span class="o">=</span> <span class="n">Serial</span><span class="p">.</span><span class="n">read</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">option</span> <span class="o">==</span> <span class="sc">'a'</span><span class="p">)</span>
    <span class="p">{</span>
      <span class="n">digitalWrite</span><span class="p">(</span><span class="n">pinLEDMicUso</span><span class="p">,</span> <span class="n">HIGH</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">option</span> <span class="o">==</span> <span class="sc">'b'</span><span class="p">)</span>
    <span class="p">{</span>
      <span class="n">digitalWrite</span><span class="p">(</span><span class="n">pinLEDMicUso</span><span class="p">,</span> <span class="n">LOW</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">option</span> <span class="o">==</span> <span class="sc">'c'</span><span class="p">)</span>
    <span class="p">{</span>
      <span class="n">digitalWrite</span><span class="p">(</span><span class="n">pinLEDMicMute</span><span class="p">,</span> <span class="n">HIGH</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">option</span> <span class="o">==</span> <span class="sc">'d'</span><span class="p">)</span>
    <span class="p">{</span>
      <span class="n">digitalWrite</span><span class="p">(</span><span class="n">pinLEDMicMute</span><span class="p">,</span> <span class="n">LOW</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">option</span> <span class="o">==</span> <span class="sc">'e'</span><span class="p">)</span>
    <span class="p">{</span>
      <span class="n">digitalWrite</span><span class="p">(</span><span class="n">pinLEDCamUso</span><span class="p">,</span> <span class="n">HIGH</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">option</span> <span class="o">==</span> <span class="sc">'f'</span><span class="p">)</span>
    <span class="p">{</span>
      <span class="n">digitalWrite</span><span class="p">(</span><span class="n">pinLEDCamUso</span><span class="p">,</span> <span class="n">LOW</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="n">btnMicMute</span> <span class="o">=</span> <span class="n">digitalRead</span><span class="p">(</span><span class="n">pinBTNMicMute</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">btnMicMute</span> <span class="o">==</span> <span class="n">LOW</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">"g"</span><span class="p">);</span>
    <span class="n">delay</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="n">btnCamMute</span> <span class="o">=</span> <span class="n">digitalRead</span><span class="p">(</span><span class="n">pinBTNCamMute</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">btnCamMute</span> <span class="o">==</span> <span class="n">LOW</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">"h"</span><span class="p">);</span>
    <span class="n">delay</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<hr />

<p><em>Repositorio con el contenido</em></p>

<p><a href="https://github.com/rubenarcos2/c_sharp-arduino_detect_mute"><img src="/images/pages/repository_small.png" alt="Repositorio" /></a>
<a href="https://github.com/rubenarcos2/c_sharp-arduino_detect_mute/tree/main/ArduinoComunicacionSerie/bin/Debug"><img src="/images/pages/icono_archivo_exe1-100x100.png" alt="Ejecutable" /></a></p>

<hr />

<p><strong>Fuentes</strong></p>

<p><a href="https://codingvision.net/c-edit-registry-keys-or-values">https://codingvision.net/c-edit-registry-keys-or-values</a>
<a href="https://superuser.com/questions/1346676/disabling-camera-via-regedit">https://superuser.com/questions/1346676/disabling-camera-via-regedit</a></p>]]></content><author><name></name></author><category term="C#" /><category term="arduino" /><category term="iot" /><summary type="html"><![CDATA[Desarrollo de una app en C# que se comunique con Arduino para la detecci√≥n del micr√≥fono, el estado muteado y la activaci√≥n de la webcam]]></summary></entry><entry><title type="html">Laravel 9 - PHP 8 y MVC</title><link href="https://rarcos.com/es/2022/07/17/Laravel-9-MVC/" rel="alternate" type="text/html" title="Laravel 9 - PHP 8 y MVC" /><published>2022-07-17T16:33:28+02:00</published><updated>2022-07-17T16:33:28+02:00</updated><id>https://rarcos.com/2022/07/17/Laravel%209%20-%20MVC</id><content type="html" xml:base="https://rarcos.com/2022/07/17/Laravel-9-MVC/"><![CDATA[<h1 id="laravel-9-php-8-y-mvc">Laravel 9, PHP 8 y MVC</h1>

<p>Desarrollo de una aplicaciones web usando Laravel 9 y PHP 8:</p>

<p>Esta es la demostraci√≥n de la aplicaci√≥n que he realizado (click <a href="https://vps.rarcos.com:10440">aqu√≠</a> o en la imagen):</p>

<p>Los credenciales son:</p>
<ul>
  <li>usuario: admin@admin.com</li>
  <li>contrase√±a: administrador</li>
</ul>

<p><a href="https://vps.rarcos.com:10440"><img src="/images/pages/laravel-inmobiliaria.png" alt="Ir a ver la app en funcionamiento" /></a></p>

<h2 id="creaci√≥n-del-proyecto">Creaci√≥n del proyecto</h2>
<p>Para la creaci√≥n del proyecto primero tenemos que tener instalado composer y php. Tambi√©n tenerlos enlazados en el IDE para que la terminal reconozca los comandos. 
Para ver c√≥mo enlazar php con vscode click <a href="https://code.visualstudio.com/docs/languages/php">aqu√≠</a>.</p>

<p>Una vez tenemos todo lo necesario, creamos el proyecto con el siguiente comando:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">composer create-project laravel/laravel nombre_app
<span class="nb">cd </span>nombre_app
php artisan serve</code></pre></figure>

<p>Y se levantar√° un servidor en <a href="http://127.0.0.1:8000/">http://127.0.0.1:8000/</a> con el proyecto (esqueleto solamente) y la p√°gina de bienvenida.
Para m√°s informaci√≥n y otros tipos de instalaciones ver <a href="https://laravel.com/docs/9.x/installation">aqu√≠</a> en la documentaci√≥n oficial.</p>

<h2 id="creaci√≥n-de-los-ficheros-migration">Creaci√≥n de los ficheros migration</h2>
<p>Para que laravel pueda crear la tabla en la DB, tiene unos ficheros que se encargan de crearlas, destruirlas, actualizarlas o modificarlas seg√∫n vamos necesitando a lo largo del proyecto.</p>

<p>Ahora vamos a crear un fichero de migrations para la tabla <em>Property</em> que vamos a crear.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">php artisan make:migration Property</code></pre></figure>

<p>Este una vez creado lo podremos comprobar en la ruta: database\migrations\fecha_y_hora_creacion_property.php</p>

<p>Ahora vamos a completar el contenido del fichero de migraci√≥n con los campos de nuestra tabla:</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="kn">use</span> <span class="nc">Illuminate\Database\Migrations\Migration</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Illuminate\Database\Schema\Blueprint</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Illuminate\Support\Facades\Schema</span><span class="p">;</span>

<span class="k">return</span> <span class="k">new</span> <span class="kd">class</span> <span class="kd">extends</span> <span class="nc">Migration</span>
<span class="p">{</span>
    <span class="cd">/**
     * Run the migrations.
     *
     * @return void
     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">up</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nc">Schema</span><span class="o">::</span><span class="nf">create</span><span class="p">(</span><span class="s1">'properties'</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="kt">Blueprint</span> <span class="nv">$table</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="nf">id</span><span class="p">();</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="nf">string</span><span class="p">(</span><span class="s1">'name'</span><span class="p">);</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="nf">string</span><span class="p">(</span><span class="s1">'shortDescription'</span><span class="p">);</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="nf">string</span><span class="p">(</span><span class="s1">'phone'</span><span class="p">);</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="nf">timestamps</span><span class="p">();</span>
        <span class="p">});</span>
    <span class="p">}</span>

    <span class="cd">/**
     * Reverse the migrations.
     *
     * @return void
     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">down</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nc">Schema</span><span class="o">::</span><span class="nf">dropIfExists</span><span class="p">(</span><span class="s1">'properties'</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span></code></pre></figure>

<p>Como se puede comprobar tiene un m√©todo up (para la creaci√≥n) y un down (para el borrado) de la tabla. Simplemente se trata de a√±adir el nombre de la tabla en ambos m√©todos, y en el up los campos de la tabla que queremos que tenga nuestro modelo.</p>

<h3 id="a√±adir-segunda-tabla-con-foreign-key">A√±adir segunda tabla con foreign key</h3>
<p>A continuaci√≥n, vamos a crear un fichero de migrations para el segundo modelo de <em>House</em> que hemos creado.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">php artisan make:migration House</code></pre></figure>

<p>Este una vez creado lo podremos comprobar en la ruta: database\migrations\fecha_y_hora_creacion_house.php</p>

<p>Ahora vamos a completar el contenido del fichero de migraci√≥n con los campos de nuestra tabla:</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="kn">use</span> <span class="nc">Illuminate\Database\Migrations\Migration</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Illuminate\Database\Schema\Blueprint</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Illuminate\Support\Facades\Schema</span><span class="p">;</span>

<span class="k">return</span> <span class="k">new</span> <span class="kd">class</span> <span class="kd">extends</span> <span class="nc">Migration</span>
<span class="p">{</span>
    <span class="cd">/**
     * Run the migrations.
     *
     * @return void
     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">up</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nc">Schema</span><span class="o">::</span><span class="nf">create</span><span class="p">(</span><span class="s1">'houses'</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="kt">Blueprint</span> <span class="nv">$table</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="nf">id</span><span class="p">();</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="nf">string</span><span class="p">(</span><span class="s1">'shortDescription'</span><span class="p">);</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="nf">string</span><span class="p">(</span><span class="s1">'phone'</span><span class="p">);</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="nf">string</span><span class="p">(</span><span class="s1">'photo'</span><span class="p">);</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="nf">foreign</span><span class="p">(</span><span class="s1">'property_id'</span><span class="p">)</span>
                <span class="o">-&gt;</span><span class="nf">references</span><span class="p">(</span><span class="s1">'id'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">on</span><span class="p">(</span><span class="s1">'properties'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">onUpdate</span><span class="p">(</span><span class="s1">'cascade'</span><span class="p">);</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="nf">timestamps</span><span class="p">();</span>
        <span class="p">});</span>
    <span class="p">}</span>

    <span class="cd">/**
     * Reverse the migrations.
     *
     * @return void
     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">down</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nc">Schema</span><span class="o">::</span><span class="nf">dropIfExists</span><span class="p">(</span><span class="s1">'houses'</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span></code></pre></figure>

<p>Como se puede comprobar tiene una clave for√°nea a√±adida para la columna <em>property_id</em> que apunta a la tabla <em>properties</em> del campo <em>id</em>.</p>

<h2 id="creaci√≥n-de-los-modelos">Creaci√≥n de los modelos</h2>
<p>Laravel est√° compuesto por varios componentes y entre ellos tenemos un ORM llamado Eloquent, que nos va a realizar todas las gestiones de la base de datos, en nuestro caso PostgreSQL.</p>

<p>Vamos a crear un modelo que almacene nuestras viviendas (recordar que el nombre debe estar siempre en singular, ya que laravel crea las tablas en plural autom√°ticamente) y para ellos ejecutaremos el comando:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">php artisan make:model House</code></pre></figure>

<p>Este una vez creado lo podremos comprobar en la ruta: app\Models\House.php</p>

<p>Ahora vamos a completar el contenido del modelo con los campos que dimos en nuestra tabla:</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="kn">namespace</span> <span class="nn">App\Models</span><span class="p">;</span>

<span class="kn">use</span> <span class="nc">Illuminate\Database\Eloquent\Factories\HasFactory</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Illuminate\Database\Eloquent\Model</span><span class="p">;</span>

<span class="kd">class</span> <span class="nc">House</span> <span class="kd">extends</span> <span class="nc">Model</span>
<span class="p">{</span>
    <span class="kn">use</span> <span class="nc">HasFactory</span><span class="p">;</span>

    <span class="k">protected</span> <span class="nv">$fillable</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s1">'shortDescription'</span><span class="p">,</span>
        <span class="s1">'phone'</span><span class="p">,</span>
        <span class="s1">'photo'</span><span class="p">,</span>
        <span class="s1">'property_id'</span>
    <span class="p">];</span>
<span class="p">}</span></code></pre></figure>

<p>Haremos los mismo con el modelo <em>Property</em>:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">php artisan make:model Property</code></pre></figure>

<p>Este una vez creado lo podremos comprobar en la ruta: app\Models\Property.php</p>

<p>Ahora vamos a completar el contenido del modelo con los campos que dimos en nuestra tabla:</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="kn">namespace</span> <span class="nn">App\Models</span><span class="p">;</span>

<span class="kn">use</span> <span class="nc">Illuminate\Database\Eloquent\Factories\HasFactory</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Illuminate\Database\Eloquent\Model</span><span class="p">;</span>

<span class="kd">class</span> <span class="nc">Property</span> <span class="kd">extends</span> <span class="nc">Model</span>
<span class="p">{</span>
    <span class="kn">use</span> <span class="nc">HasFactory</span><span class="p">;</span>

    <span class="k">protected</span> <span class="nv">$fillable</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s1">'name'</span><span class="p">,</span>
        <span class="s1">'shortDescription'</span><span class="p">,</span>
        <span class="s1">'phone'</span><span class="p">,</span>
    <span class="p">];</span>
<span class="p">}</span></code></pre></figure>

<h2 id="realizaci√≥n-de-la-migraci√≥n-a-la-db">Realizaci√≥n de la migraci√≥n a la DB</h2>
<p>Primero, vamos a configurar los par√°metros de conexi√≥n con nuestra DB. Estos se encuentra en el fichero de configuraci√≥n <em>.env</em> en la ra√≠z del proyecto. Concretamente cambiaremos la parte referente a la DB:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">DB_CONNECTION</span><span class="o">=</span>pgsql
<span class="nv">DB_HOST</span><span class="o">=</span>127.0.0.1
<span class="nv">DB_PORT</span><span class="o">=</span>5432
<span class="nv">DB_DATABASE</span><span class="o">=</span>laravel
<span class="nv">DB_USERNAME</span><span class="o">=</span>postgres
<span class="nv">DB_PASSWORD</span><span class="o">=</span>postgres</code></pre></figure>

<p>Posteriormente, migramos todos los cambios a la DB con el comando:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">php artisan make:migration</code></pre></figure>

<h2 id="creaci√≥n-del-controlador">Creaci√≥n del controlador</h2>
<p>Ahora vamos a crear un controlador para cada modelo, estos tendr√°n las operaciones b√°sicas de un CRUD que es lo que vamos a necesitar.</p>

<p>Para crear el controlador del modelo <em>House</em> ejecutamos:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">php artisan make:controller HouseController</code></pre></figure>

<p>Y el contenido del controlador ser√≠a el siguiente:</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="kn">namespace</span> <span class="nn">App\Http\Controllers</span><span class="p">;</span>

<span class="kn">use</span> <span class="nc">App\Models\Property</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Illuminate\Http\Request</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">App\Models\House</span><span class="p">;</span>

<span class="kd">class</span> <span class="nc">HouseController</span> <span class="kd">extends</span> <span class="nc">Controller</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">index</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$houses</span> <span class="o">=</span> <span class="nc">House</span><span class="o">::</span><span class="nf">all</span><span class="p">();</span>
        <span class="nv">$properties</span> <span class="o">=</span> <span class="nc">Property</span><span class="o">::</span><span class="nf">all</span><span class="p">();</span>
        <span class="k">return</span> <span class="nf">view</span><span class="p">(</span><span class="s1">'houses.index'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'houses'</span> <span class="o">=&gt;</span> <span class="nv">$houses</span><span class="p">,</span> <span class="s1">'properties'</span> <span class="o">=&gt;</span> <span class="nv">$properties</span><span class="p">]);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="n">store</span><span class="p">(</span><span class="kt">Request</span> <span class="nv">$request</span><span class="p">){</span>

        <span class="nv">$request</span><span class="o">-&gt;</span><span class="nf">validate</span><span class="p">([</span>
            <span class="s1">'title'</span> <span class="o">=&gt;</span> <span class="s1">'required|min:3'</span><span class="p">,</span>
        <span class="p">]);</span>

        <span class="nv">$house</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">House</span><span class="p">;</span>
        <span class="nv">$house</span><span class="o">-&gt;</span><span class="n">title</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="n">title</span><span class="p">;</span>
        <span class="nv">$house</span><span class="o">-&gt;</span><span class="n">category_id</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="n">category_id</span><span class="p">;</span>
        <span class="nv">$house</span><span class="o">-&gt;</span><span class="nf">save</span><span class="p">();</span>

        <span class="k">return</span> <span class="nf">redirect</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">route</span><span class="p">(</span><span class="s1">'houses'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">with</span><span class="p">(</span><span class="s1">'success'</span><span class="p">,</span> <span class="s1">'Todo created successfully'</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="n">destroy</span><span class="p">(</span><span class="nv">$id</span><span class="p">){</span>
        <span class="nv">$house</span> <span class="o">=</span> <span class="nc">House</span><span class="o">::</span><span class="nf">find</span><span class="p">(</span><span class="nv">$id</span><span class="p">);</span>
        <span class="nv">$house</span><span class="o">-&gt;</span><span class="nb">delete</span><span class="p">();</span>
        <span class="k">return</span> <span class="nf">redirect</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">route</span><span class="p">(</span><span class="s1">'houses'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">with</span><span class="p">(</span><span class="s1">'success'</span><span class="p">,</span> <span class="s1">'Todo deleted successfully'</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="n">show</span><span class="p">(</span><span class="nv">$id</span><span class="p">){</span>
        <span class="nv">$house</span> <span class="o">=</span> <span class="nc">House</span><span class="o">::</span><span class="nf">find</span><span class="p">(</span><span class="nv">$id</span><span class="p">);</span>
        <span class="nv">$properties</span> <span class="o">=</span> <span class="nc">Property</span><span class="o">::</span><span class="nf">all</span><span class="p">();</span>
        <span class="k">return</span> <span class="nf">view</span><span class="p">(</span><span class="s1">'houses.show'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'todo'</span> <span class="o">=&gt;</span> <span class="nv">$house</span><span class="p">,</span> <span class="s1">'properties'</span> <span class="o">=&gt;</span> <span class="nv">$properties</span><span class="p">]);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="n">update</span><span class="p">(</span><span class="kt">Request</span> <span class="nv">$request</span><span class="p">,</span> <span class="nv">$id</span><span class="p">){</span>
        <span class="nv">$house</span> <span class="o">=</span> <span class="nc">House</span><span class="o">::</span><span class="nf">find</span><span class="p">(</span><span class="nv">$id</span><span class="p">);</span>

        <span class="nv">$house</span><span class="o">-&gt;</span><span class="n">title</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="n">title</span><span class="p">;</span>
        <span class="nv">$house</span><span class="o">-&gt;</span><span class="nf">save</span><span class="p">();</span>

        <span class="k">return</span> <span class="nf">redirect</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">route</span><span class="p">(</span><span class="s1">'Houses'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">with</span><span class="p">(</span><span class="s1">'success'</span><span class="p">,</span> <span class="s1">'House updated successfully'</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<h2 id="creaci√≥n-del-enrutador">Creaci√≥n del enrutador</h2>
<p>En laravel el enrutador se encuentra en la ruta <em>\routes\web.php</em>. Realizaremos las siguientes incorporaciones:</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="kn">use</span> <span class="nc">Illuminate\Support\Facades\Route</span><span class="p">;</span>

<span class="cm">/*
|--------------------------------------------------------------------------
| Web Routes
|--------------------------------------------------------------------------
|
| Here is where you can register web routes for your application. These
| routes are loaded by the RouteServiceProvider within a group which
| contains the "web" middleware group. Now create something great!
|
*/</span>

<span class="nc">Route</span><span class="o">::</span><span class="nf">get</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="k">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nf">view</span><span class="p">(</span><span class="s1">'welcome'</span><span class="p">);</span>
<span class="p">});</span>

<span class="nc">Route</span><span class="o">::</span><span class="nf">get</span><span class="p">(</span><span class="s1">'/properties'</span><span class="p">,</span> <span class="s1">'\App\Http\Controllers\PropertyController@index'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">name</span><span class="p">(</span><span class="s1">'properties'</span><span class="p">);</span>

<span class="nc">Route</span><span class="o">::</span><span class="nf">post</span><span class="p">(</span><span class="s1">'/properties'</span><span class="p">,</span> <span class="s1">'App\Http\Controllers\PropertyController@store'</span><span class="p">);</span>

<span class="nc">Route</span><span class="o">::</span><span class="nb">delete</span><span class="p">(</span><span class="s1">'/properties/{id}'</span><span class="p">,</span> <span class="s1">'App\Http\Controllers\PropertyController@destroy'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">name</span><span class="p">(</span><span class="s1">'properties-destroy'</span><span class="p">);</span>

<span class="nc">Route</span><span class="o">::</span><span class="nf">get</span><span class="p">(</span><span class="s1">'/properties/{id}'</span><span class="p">,</span> <span class="s1">'App\Http\Controllers\PropertyController@show'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">name</span><span class="p">(</span><span class="s1">'properties-edit'</span><span class="p">);</span>

<span class="nc">Route</span><span class="o">::</span><span class="nf">patch</span><span class="p">(</span><span class="s1">'/properties/{id}'</span><span class="p">,</span> <span class="s1">'App\Http\Controllers\PropertyController@update'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">name</span><span class="p">(</span><span class="s1">'properties-update'</span><span class="p">);</span>

<span class="nc">Route</span><span class="o">::</span><span class="nf">get</span><span class="p">(</span><span class="s1">'/houses'</span><span class="p">,</span> <span class="s1">'\App\Http\Controllers\HouseController@index'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">name</span><span class="p">(</span><span class="s1">'houses'</span><span class="p">);</span>

<span class="nc">Route</span><span class="o">::</span><span class="nf">post</span><span class="p">(</span><span class="s1">'/houses'</span><span class="p">,</span> <span class="s1">'App\Http\Controllers\HouseController@store'</span><span class="p">);</span>

<span class="nc">Route</span><span class="o">::</span><span class="nb">delete</span><span class="p">(</span><span class="s1">'/houses/{id}'</span><span class="p">,</span> <span class="s1">'App\Http\Controllers\HouseController@destroy'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">name</span><span class="p">(</span><span class="s1">'houses-destroy'</span><span class="p">);</span>

<span class="nc">Route</span><span class="o">::</span><span class="nf">get</span><span class="p">(</span><span class="s1">'/houses/{id}'</span><span class="p">,</span> <span class="s1">'App\Http\Controllers\HouseController@show'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">name</span><span class="p">(</span><span class="s1">'houses-edit'</span><span class="p">);</span>

<span class="nc">Route</span><span class="o">::</span><span class="nf">patch</span><span class="p">(</span><span class="s1">'/houses/{id}'</span><span class="p">,</span> <span class="s1">'App\Http\Controllers\HouseController@update'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">name</span><span class="p">(</span><span class="s1">'houses-update'</span><span class="p">);</span></code></pre></figure>

<p>Con el siguiente comando, podemos ver una tabla con todos los endpoints que hemos ido creando:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">php artisan route:list</code></pre></figure>

<h2 id="creaci√≥n-del-segundo-controlador">Creaci√≥n del segundo controlador</h2>
<p>Para crear el controlador del modelo <em>Property</em> ejecutamos:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">php artisan make:controller PropertyController</code></pre></figure>

<p>Y el contenido del controlador ser√≠a el siguiente:</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="kn">namespace</span> <span class="nn">App\Http\Controllers</span><span class="p">;</span>

<span class="kn">use</span> <span class="nc">Illuminate\Http\Request</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">App\Models\Property</span><span class="p">;</span>

<span class="kd">class</span> <span class="nc">PropertyController</span> <span class="kd">extends</span> <span class="nc">Controller</span>
<span class="p">{</span>
    <span class="cd">/**
     * Display a listing of the resource.
     *
     * @return \Illuminate\Http\Response
     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">index</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$properties</span> <span class="o">=</span> <span class="nc">Property</span><span class="o">::</span><span class="nf">all</span><span class="p">();</span>

        <span class="k">return</span> <span class="nf">view</span><span class="p">(</span><span class="s1">'properties.index'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'properties'</span> <span class="o">=&gt;</span> <span class="nv">$properties</span><span class="p">]);</span>
    <span class="p">}</span>

    <span class="cd">/**
     * Show the form for creating a new resource.
     *
     * @return \Illuminate\Http\Response
     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">create</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">//</span>
    <span class="p">}</span>

    <span class="cd">/**
     * Store a newly created resource in storage.
     *
     * @param  \Illuminate\Http\Request  $request
     * @return \Illuminate\Http\Response
     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">store</span><span class="p">(</span><span class="kt">Request</span> <span class="nv">$request</span><span class="p">)</span>
    <span class="p">{</span>


        <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">validate</span><span class="p">(</span><span class="nv">$request</span><span class="p">,</span> <span class="p">[</span>
            <span class="s1">'name'</span> <span class="o">=&gt;</span> <span class="s1">'required|unique:properties|max:255'</span><span class="p">,</span>
        <span class="p">]);</span>

        <span class="nv">$property</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Property</span><span class="p">;</span>
        <span class="nv">$property</span><span class="o">-&gt;</span><span class="n">name</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="n">name</span><span class="p">;</span>
        <span class="nv">$property</span><span class="o">-&gt;</span><span class="nf">save</span><span class="p">();</span>

        <span class="k">return</span> <span class="nf">redirect</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">route</span><span class="p">(</span><span class="s1">'properties.index'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">with</span><span class="p">(</span><span class="s1">'success'</span><span class="p">,</span> <span class="s1">'Property has been added'</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="cd">/**
     * Display the specified resource.
     *
     * @param  int  $id
     * @return \Illuminate\Http\Response
     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">show</span><span class="p">(</span><span class="nv">$id</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$property</span> <span class="o">=</span> <span class="nc">Property</span><span class="o">::</span><span class="nf">find</span><span class="p">(</span><span class="nv">$id</span><span class="p">);</span>
        <span class="k">return</span> <span class="nf">view</span><span class="p">(</span><span class="s1">'properties.show'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'property'</span> <span class="o">=&gt;</span> <span class="nv">$property</span><span class="p">]);</span>
    <span class="p">}</span>

    <span class="cd">/**
     * Show the form for editing the specified resource.
     *
     * @param  int  $id
     * @return \Illuminate\Http\Response
     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">edit</span><span class="p">(</span><span class="nv">$id</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">//</span>
    <span class="p">}</span>

    <span class="cd">/**
     * Update the specified resource in storage.
     *
     * @param  \Illuminate\Http\Request  $request
     * @param  int  $id
     * @return \Illuminate\Http\Response
     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">update</span><span class="p">(</span><span class="kt">Request</span> <span class="nv">$request</span><span class="p">,</span> <span class="nv">$property</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$property</span> <span class="o">=</span> <span class="nc">Property</span><span class="o">::</span><span class="nf">find</span><span class="p">(</span><span class="nv">$property</span><span class="p">);</span>

        <span class="nv">$property</span><span class="o">-&gt;</span><span class="n">name</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="n">name</span><span class="p">;</span>
        <span class="nv">$property</span><span class="o">-&gt;</span><span class="nf">save</span><span class="p">();</span>

        <span class="k">return</span> <span class="nf">redirect</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">route</span><span class="p">(</span><span class="s1">'properties.index'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">with</span><span class="p">(</span><span class="s1">'success'</span><span class="p">,</span> <span class="s1">'Property updated successfully'</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="cd">/**
     * Remove the specified resource from storage.
     *
     * @param  int  $id
     * @return \Illuminate\Http\Response
     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">destroy</span><span class="p">(</span><span class="nv">$property</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">//</span>
        <span class="nv">$property</span> <span class="o">=</span> <span class="nc">Property</span><span class="o">::</span><span class="nf">find</span><span class="p">(</span><span class="nv">$property</span><span class="p">);</span>
        <span class="nv">$property</span><span class="o">-&gt;</span><span class="nf">todos</span><span class="p">()</span><span class="o">-&gt;</span><span class="nb">each</span><span class="p">(</span><span class="k">function</span><span class="p">(</span><span class="nv">$todo</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$todo</span><span class="o">-&gt;</span><span class="nb">delete</span><span class="p">();</span> <span class="c1">// &lt;-- direct deletion</span>
        <span class="p">});</span>
        <span class="nv">$property</span><span class="o">-&gt;</span><span class="nb">delete</span><span class="p">();</span>
        <span class="k">return</span> <span class="nf">redirect</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">route</span><span class="p">(</span><span class="s1">'properties.index'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">with</span><span class="p">(</span><span class="s1">'success'</span><span class="p">,</span> <span class="s1">'Property deleted successfully'</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<h2 id="sistema-de-vistas">Sistema de vistas</h2>
<p>Debido a que es un sistema completo las vistas que se han realizado, a√±adiendo bootstrap y dem√°s elementos web, que directamente te bajes los recursos de mi repositorio y le eches un vistazo al funcionamiente, puesto que es intuitivo.</p>

<p><a href="https://github.com/rubenarcos2/laravel-Inmobiliaria/tree/main/resources/views">https://github.com/rubenarcos2/laravel-Inmobiliaria/tree/main/resources/views</a></p>

<h2 id="instalaci√≥n-m√≥dulo-auth-login">Instalaci√≥n m√≥dulo Auth: login</h2>
<p>Tendremos que ejeuctar los siguientes comandos:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">composer require laravel/ui
php artisan ui vue <span class="nt">--auth</span>
npm <span class="nb">install
</span>npm run dev</code></pre></figure>

<p>Comprobaremos que nos ha creado:</p>
<ul>
  <li>Actualizado el controlador HomeController en App\Http\Controllers</li>
  <li>Creado una carpeta <em>auth</em> en la vista en resources\views\auth</li>
  <li>A√±adido <em>Auth::routes();</em> a nuestros endpoints en routes\web.php</li>
</ul>

<h2 id="soluci√≥n-al-error-de-la-p√©rdida-del-estilo-en-login-logout-y-forgot-m√≥dulo-auth">Soluci√≥n al error de la p√©rdida del estilo en login, logout y forgot. M√≥dulo ‚Äòauth‚Äô.</h2>
<p>A√∫n instalado todo lo anterior, se puede dar el caso de que se pierda el estilo de las p√°ginas de auth que se acaban de instalar, para solucionarlo:</p>
<ul>
  <li>Ir a la vista \resources\views\layouts\app.blade.php</li>
  <li>Eliminar las rutas al css y el fichero jss</li>
  <li>Sustituirlas por:</li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">&lt;<span class="nb">link </span><span class="nv">href</span><span class="o">=</span><span class="s2">"https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css"</span> <span class="nv">rel</span><span class="o">=</span><span class="s2">"stylesheet"</span> <span class="nv">integrity</span><span class="o">=</span><span class="s2">"sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU"</span> <span class="nv">crossorigin</span><span class="o">=</span><span class="s2">"anonymous"</span><span class="o">&gt;</span>
&lt;script <span class="nv">src</span><span class="o">=</span><span class="s2">"https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js"</span> <span class="nv">integrity</span><span class="o">=</span><span class="s2">"sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ"</span> <span class="nv">crossorigin</span><span class="o">=</span><span class="s2">"anonymous"</span><span class="o">&gt;</span>&lt;/script&gt;</code></pre></figure>

<p>Y una vez guardado se ver√°n los cambios ya aplicados y nuestra aplicaci√≥n ya tendr√° servicio de autenticaci√≥n completo. Solo tendremos que ir a√±adiendo la autenticaci√≥n requerida en los endpoints.</p>

<h2 id="modificaci√≥n-del-enrutador">Modificaci√≥n del enrutador</h2>
<p>Ahora vamos a modificar el enrutador para que tenga los endpoints restringidos y solamente se pueda acceder a la vista principal sin haber hecho <em>login in</em>.</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="kn">use</span> <span class="nc">Illuminate\Support\Facades\Route</span><span class="p">;</span>

<span class="cm">/*
|--------------------------------------------------------------------------
| Web Routes
|--------------------------------------------------------------------------
|
| Here is where you can register web routes for your application. These
| routes are loaded by the RouteServiceProvider within a group which
| contains the "web" middleware group. Now create something great!
|
*/</span>
<span class="nc">Auth</span><span class="o">::</span><span class="nf">routes</span><span class="p">();</span>
<span class="nc">Route</span><span class="o">::</span><span class="nf">group</span><span class="p">([</span><span class="s1">'middleware'</span> <span class="o">=&gt;</span> <span class="s1">'auth'</span><span class="p">],</span> <span class="k">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nc">Route</span><span class="o">::</span><span class="nb">delete</span><span class="p">(</span><span class="s1">'/{id}'</span><span class="p">,</span> <span class="s1">'App\Http\Controllers\HouseController@destroy'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">name</span><span class="p">(</span><span class="s1">'houses-destroy'</span><span class="p">);</span>
    <span class="nc">Route</span><span class="o">::</span><span class="nf">post</span><span class="p">(</span><span class="s1">'/edit/{id}'</span><span class="p">,</span> <span class="s1">'App\Http\Controllers\HouseController@update'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">name</span><span class="p">(</span><span class="s1">'houses-update'</span><span class="p">);</span>
    <span class="nc">Route</span><span class="o">::</span><span class="nf">get</span><span class="p">(</span><span class="s1">'/edit/{id}'</span><span class="p">,</span> <span class="s1">'App\Http\Controllers\HouseController@edit'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">name</span><span class="p">(</span><span class="s1">'houses-edit'</span><span class="p">);</span>
    <span class="nc">Route</span><span class="o">::</span><span class="nf">get</span><span class="p">(</span><span class="s1">'/new'</span><span class="p">,</span> <span class="s1">'App\Http\Controllers\HouseController@new'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">name</span><span class="p">(</span><span class="s1">'houses-new'</span><span class="p">);</span>
    <span class="nc">Route</span><span class="o">::</span><span class="nf">post</span><span class="p">(</span><span class="s1">'/new'</span><span class="p">,</span> <span class="s1">'App\Http\Controllers\HouseController@store'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">name</span><span class="p">(</span><span class="s1">'houses-new'</span><span class="p">);</span>

    <span class="nc">Route</span><span class="o">::</span><span class="nf">get</span><span class="p">(</span><span class="s1">'/properties'</span><span class="p">,</span> <span class="s1">'\App\Http\Controllers\PropertyController@index'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">name</span><span class="p">(</span><span class="s1">'properties'</span><span class="p">);</span>
    <span class="nc">Route</span><span class="o">::</span><span class="nf">get</span><span class="p">(</span><span class="s1">'/properties/new'</span><span class="p">,</span> <span class="s1">'App\Http\Controllers\PropertyController@new'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">name</span><span class="p">(</span><span class="s1">'properties-new'</span><span class="p">);</span>
    <span class="nc">Route</span><span class="o">::</span><span class="nf">post</span><span class="p">(</span><span class="s1">'/properties/new'</span><span class="p">,</span> <span class="s1">'App\Http\Controllers\PropertyController@store'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">name</span><span class="p">(</span><span class="s1">'properties-new'</span><span class="p">);</span>
    <span class="nc">Route</span><span class="o">::</span><span class="nf">get</span><span class="p">(</span><span class="s1">'/properties/{id}'</span><span class="p">,</span> <span class="s1">'App\Http\Controllers\PropertyController@show'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">name</span><span class="p">(</span><span class="s1">'properties-show'</span><span class="p">);</span>
    <span class="nc">Route</span><span class="o">::</span><span class="nb">delete</span><span class="p">(</span><span class="s1">'/properties/{id}'</span><span class="p">,</span> <span class="s1">'App\Http\Controllers\PropertyController@destroy'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">name</span><span class="p">(</span><span class="s1">'properties-destroy'</span><span class="p">);</span>
    <span class="nc">Route</span><span class="o">::</span><span class="nf">post</span><span class="p">(</span><span class="s1">'/properties/edit/{id}'</span><span class="p">,</span> <span class="s1">'App\Http\Controllers\PropertyController@update'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">name</span><span class="p">(</span><span class="s1">'properties-update'</span><span class="p">);</span>
    <span class="nc">Route</span><span class="o">::</span><span class="nf">get</span><span class="p">(</span><span class="s1">'/properties/edit/{id}'</span><span class="p">,</span> <span class="s1">'App\Http\Controllers\PropertyController@edit'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">name</span><span class="p">(</span><span class="s1">'properties-edit'</span><span class="p">);</span>
<span class="p">});</span>

<span class="nc">Route</span><span class="o">::</span><span class="nf">get</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="s1">'\App\Http\Controllers\HouseController@index'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">name</span><span class="p">(</span><span class="s1">'houses'</span><span class="p">);</span>
<span class="nc">Route</span><span class="o">::</span><span class="nf">get</span><span class="p">(</span><span class="s1">'/{id}'</span><span class="p">,</span> <span class="s1">'App\Http\Controllers\HouseController@show'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">name</span><span class="p">(</span><span class="s1">'houses-show'</span><span class="p">);</span></code></pre></figure>

<p>Es importante tener en cuenta el orden en el que se definen las rutas hacia los controladores, debe de coincidir con el flujo del usuario, para que no empiecen a generarse errores dispares que en apariencia difieren, pero son provocados por esto solamente.</p>

<hr />

<p><em>Repositorio con el contenido</em></p>

<p><a href="https://github.com/rubenarcos2/laravel-Inmobiliaria"><img src="/images/pages/repository_small.png" alt="Repositorio" /></a></p>

<hr />

<p><strong>Fuentes:</strong></p>

<p><a href="https://www.youtube.com/watch?v=a-4923Uyu54">https://www.youtube.com/watch?v=a-4923Uyu54</a>
<a href="https://github.com/marcosrivasr/primera-app-laravel">https://github.com/marcosrivasr/primera-app-laravel</a>
<a href="https://www.codermen.com/solved-target-class-controller-does-not-exist/#:~:text=%E2%80%9CTarget%20class%20Controller%20does%20not,your%20routes%20are%20loaded%20into.">https://www.codermen.com/solved-target-class-controller-does-not-exist/#:~:text=%E2%80%9CTarget%20class%20Controller%20does%20not,your%20routes%20are%20loaded%20into.</a>
<a href="https://styde.net/despliega-tu-aplicacion-de-laravel-con-github-y-heroku/">https://styde.net/despliega-tu-aplicacion-de-laravel-con-github-y-heroku/</a>
<a href="https://www.youtube.com/watch?v=BowxsMH91Xw">https://www.youtube.com/watch?v=BowxsMH91Xw</a>
<a href="https://www.codekayak.net/laravel-displaying-created_at-updated_at-value-in-view/">https://www.codekayak.net/laravel-displaying-created_at-updated_at-value-in-view/</a>
<a href="https://webdesignerwall.com/wdw-snippet/bootstrap-cards-in-columns">https://webdesignerwall.com/wdw-snippet/bootstrap-cards-in-columns</a></p>]]></content><author><name></name></author><category term="php" /><category term="spring" /><category term="MVC" /><category term="laravel" /><summary type="html"><![CDATA[Uso del framework Laravel 9 con PHP 8: MVC]]></summary></entry></feed>