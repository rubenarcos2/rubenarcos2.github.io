<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Spring - WebAPI RESTful Arduino <-> Raspberry</title>
  <meta name='description' content='Desarrollador de aplicaciones multiplataformas'>
  
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Dancing+Script%7CPT+Serif:400,400i,700%7CLato:400,700%7CRoboto:300,400" rel="stylesheet">

  <!-- Font Awesome v4.7.0 -->
  <link rel="stylesheet" href="/css/font-awesome.min.css">

  <!-- Normalize v7.0.0 -->
  <link rel="stylesheet" href="/css/normalize.css">

  <!-- Main Stylesheet -->
  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://localhost:4000/2018/10/19/WebAPI_RESTful_Arduino-Raspberry_con_Spring/">
  <link rel="alternate" type="application/rss+xml" title="Rubén Arcos" href="/feed.xml">

  <!-- Chrome, Firefox OS and Opera -->
  <meta name="theme-color" content="#faf5ee">
  <!-- Windows Phone -->
  <meta name="msapplication-navbutton-color" content="#faf5ee">
  <!-- iOS Safari -->
  <meta name="apple-mobile-web-app-status-bar-style" content="#faf5ee">
</head>

  
  
  
    
      <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-64172909-1', 'auto');
  ga('send', 'pageview');

</script> <!-- /Google Analytics -->
  

    

    <div class="full-page-container">
      <div class="overlay"></div>
      <header class="site-header clearfix">
  <div class="wrapper-content">

    <div class="navigation-wrap">
      <div class="nav-toggle-close"><i class="fa fa-times" aria-hidden="true"></i></div>

      <nav class="site-nav">
        
          
        
          
            
              <a href='/about/'>Sobre mí</a>
            
          
        
          
            
              <a href='/contacto/'>Contacto</a>
            
          
        
          
            
              <a href='/cookies/'>Cookies</a>
            
          
        
          
            
          
        
          
            
          
        
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
        <a href="https://linkedin.com/in/rubenarcos2"><i class="fa fa-linkedin fa-2x" aria-hidden="true"></i></a>
        <a href="https://github.com/rubenarcos2"><i class="fa fa-github fa-2x" aria-hidden="true"></i></a>
      </nav>
      
    </div>

    <span class="search-toggle">
      <i class="fa fa-search" aria-hidden="true"></i>
    </span>
    
    <div class="nav-toggle"><i class="fa fa-bars" aria-hidden="true"></i></div>

    <div class="site-logo">
      <a href="/">Rubén Arcos</a>
    </div>
    
  </div>
</header> <!-- /.site-header -->

      <div class="search-box">
  <div class="wrapper-content">
    <form class="search-form">
      <label class="screen-reader-text" for="search-input">Buscar...</label>
      <input type="text" id="search-input" class="search-field" name="s" placeholder="Type to search...">
    </form>
    <div class="btn-close">
      <span class="bt-search-close">
        <i class="fa fa-times" aria-hidden="true"></i>
      </span>
    </div>
  </div>
  <ul id="results-container" class="search-results-list"></ul>  
</div> <!-- /.search-box -->

        <div class="post-header" style="background: url(/images/pages/171211-20Arduino20Vs20Raspberry20Pi1.jpg)">
  <div class="post-header-info">
    <h1 class="post-title">Spring - WebAPI RESTful Arduino &lt;-&gt; Raspberry</h1>
    <div class="post-meta">
      <time datetime="2018-10-19T16:33:28+02:00">
         19/10/2018
      </time>
    </div>
  </div>
</div>

<div class="content-box">
  <article class="post">

    <div class="post-content">
      <p>He realizado el siguiente proyecto de pruebas RESTful para la comunicación mediante una interfaz cliente en Arduino y Raspberry pi y con un servidor basado en Spring para la gestión de la API. En ambos clientes se dispone de acceso a los elementos físicos de hardware mediante comunicación I/O a las GPIOs correspondientes.</p>

<p><img src="/images/pages/171211-20Arduino20Vs20Raspberry20Pi1.jpg" alt="" /></p>

<p>La idea de realización consiste en la gestión de un contador basado e instalado en una placa Arduino Uno que consta de un botón y un display LED para la visualización del mismo, a su vez el programa de este gestiona la posibilidad de incremento físico del contador (mediante el botón), como mediante la recepción exterior por el puerto COM (USB) y la asignación de un valor expecífico recibido en remoto.</p>

<p>Por otra parte la placa Raspberry Pi, alberga el servidor de gestió de la API, la comunicación con Arduino Uno (mediante USB, aunque podría haberse instalado online: bluetooth, wifi local/nube) y a la GPIO.</p>

<p>El consumo de la API se podrá realizar a travás de cualquier cliente HTTP, bien sea web o App Android, por ejemplo (estando en construcción esta última, que mostrará aquí en breve, cuando está libre de errores).</p>

<p><img src="/images/pages/diagrama_sistema.jpg" alt="" /></p>

<h4 id="composición-y-diseño"><strong>Composición y diseño:</strong></h4>

<p>Hardware : Arduino</p>

<ul>
  <li>Display LED numárico y Botón con comunicación I/O sobre COM port</li>
  <li>Arduino comunnication I/O COM port, Display LED output, Botón input, Contador</li>
  <li>Middleware &amp; Server : Raspberry Pi</li>
  <li>Tomcat con Spring WebAPI services Raspberry Py</li>
  <li>I/O GPIO controller, LED pin out</li>
  <li>Client : Cualquier conexión HTTP</li>
  <li>HTTP API consume: Web &amp; App Android</li>
</ul>

<h4 id="elementos-de-hardware-que-componen-el-sistema"><strong>Elementos de Hardware</strong> que componen el sistema:</h4>

<h3 id="la-creación-del-servidor">La creación del servidor</h3>

<p>El servidor se ha creado mediante el framework de Spring incluyendo:</p>

<ul>
  <li>Comunicación DB mediante JPA e Hibernate</li>
  <li>SSH para depuración y deploy remoto en Raspberry Pi</li>
  <li>Gestión HTTP para los controller de la API</li>
  <li>Comunicación y gestión de puertos GPIO (elementos físicos de hardware)
    <ul>
      <li>Arduino con conexión COM (USB) a Raspberry Pi</li>
      <li>GPIO I/O Raspberry Pi</li>
    </ul>
  </li>
  <li>Generador aleatorio de nombres (crea los datos de la DB con formatos ‘previsibles’</li>
</ul>

<blockquote>
  <p><em>Destacar que está pendiente de implementar lo incorporación de seguridad (Spring Security) y encriptación de las comunicaciones mediante HTTPS y DB de datos sensibles</em></p>
</blockquote>

<p><img src="/images/pages/web201.png" alt="" /> En el servidor se encuentra toda gestión de la comunicación con la DB, tambián están los DTO (modelos de datos que se publican en la api para su futuro consumo desde un app Android), los controladores: datos de la DB (DTOs), Contador Android, LED en Raspberry pi y sus correspodientes driver para acceso a GPIO y comunicación puerto COM.</p>

<p>La compilación, depuración y deploy se está realizando en remoto desde un PC que se encuentra en la misma (o no) red que la Raspberry Pi, a la que se ataca mediante SSH para su control y subida de ficheros. La configuración de esta conexión se encuentra declarada el pom.xml, pero está prevista la externalización a un fichero externo encriptado (está retrasado por la dependencia de una librería de terceros).</p>

<p>A continuación se muestra el transcurso de un funcionamiento esperado para sistema:</p>

<ol>
  <li>Deploy remoto en raspberry</li>
  <li>Encendido y comunicación Raspberry&lt;-&gt;Arduino</li>
  <li>Puesta en marcha e incremento contador</li>
  <li>Consumo API y modificación contador desde esta</li>
</ol>

<p>Incremento del contador de forma manual (mediante botón físico) y comunición Arduino &gt; Raspberry Pi mediante puerto COM y consumo API obtención contador</p>

<video width="100%" muted="" controls=""><source src="/images/pages/arduino_on_manual.mp4" type="video/mp4" /></video>

<p>Comunicación Raspberry Pi GPIO desde servidor mediante consumo API, control y obtención estado LED</p>

<video width="100%" muted="" controls=""><source src="/images/pages/raspberry_led.mp4" type="video/mp4" /></video>

<p>Comunicación Raspberry Pi &gt; Arduino desde servidor mediante consumo API, control contador</p>

<video width="100%" muted="" controls=""><source src="/images/pages/arduino_ctrl_api.mp4" type="video/mp4" /></video>

    </div>

    <footer class="post-footer">
      <p>
        <h3>Content License</h3>

        <p><img src="/images/pages/88x311.png"/></p>
        
        <p>This web page, all content with proyects and source code, is licensed under Creative Commons: Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0) <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/">More info</a></p>
        
        <p>Esta página web y todo su contenido, incluido proyectos y código fuente, está licenciado bajo una licencia de Creative Commons: Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)<a href="https://creativecommons.org/licenses/by-nc-nd/4.0/deed.es">Más info</a></p>
        
      </p>

      <ul class="post-footer-list">
        <li class="post-footer-item">
          <a class="post-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/2018/10/19/WebAPI_RESTful_Arduino-Raspberry_con_Spring/" onclick="window.open(this.href, 'pop-up', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook" rel="nofollow"><i class="fa fa-facebook" aria-hidden="true"></i><span>Facebook</span></a>
        </li>

        <li class="post-footer-item">
          <a class="post-twitter" href="https://twitter.com/intent/tweet?text=Spring%20-%20WebAPI%20RESTful%20Arduino%20%3C-%3E%20Raspberry&url=http://localhost:4000/2018/10/19/WebAPI_RESTful_Arduino-Raspberry_con_Spring/" onclick="window.open(this.href, 'pop-up', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter" rel="nofollow"><i class="fa fa-twitter" aria-hidden="true"></i><span>Twitter</span></a>
        </li>

        <li class="post-footer-item">
          <a href="http://pinterest.com/pin/create/button/?url=http://localhost:4000/2018/10/19/WebAPI_RESTful_Arduino-Raspberry_con_Spring/&amp;media=http://localhost:4000/images/pages/171211-20Arduino20Vs20Raspberry20Pi1.jpg&amp;description=Spring%20-%20WebAPI%20RESTful%20Arduino%20%3C-%3E%20Raspberry" onclick="window.open(this.href, 'pop-up', 'left=20,top=20,width=900,height=500,toolbar=1,resizable=0'); return false;" class="post-pinterest" title="Share on Pinterest" rel="nofollow"><i class="fa fa-pinterest" aria-hidden="true"></i><span>Pinterest</span></a>
        </li>
      </ul>
      
      <div class="post-tag">
        <span>Tags:</span>
        
        <a href="/tags#web" class="tag">web</a>
        
        <a href="/tags#https" class="tag">https</a>
        
      </div>
      
    </footer>

    
    <div class="post-author">
      
      <div class="post-author-image">
        <a style="background-image: url(/images/ruben.jpg)">
          <span class="screen-reader-text">Rubén Arcos Picture</span>
        </a>
      </div>
      <div class="post-author-info">
        <h4>Rubén Arcos</h4>
        <p class="post-author-bio">Soy desarrollador de aplicaciones informáticas. <br>Tengo un C.F.G.S. en DAM y estoy haciendo un curso de especialización en IA y Big data.</p>
        <div class="post-author-meta">
          
          <a href="https://twitter.com/rarcosdev" target="_blank"><i class="fa fa-twitter" aria-hidden="true"></i></a>
          
          
          <a href="https://linkedin.com/in/rubenarcos2" target="_blank"><i class="fa fa-linkedin" aria-hidden="true"></i></a>
          
          
          <a href="https://github.com/rubenarcos2" target="_blank"><i class="fa fa-github" aria-hidden="true"></i></a>
          
          
          
          
          
          
          
          
          
        </div>
      </div>
      
    </div>

    <div class="page-navigation clearfix">
      
      <a class="prev-page" href="/2018/06/11/API_Rest_con_Spring/"><i class="fa fa-angle-left" aria-hidden="true"></i><span>Spring - API Rest simple</span></a>
      
      
      <a class="next-page" href="/2018/11/01/Actualizacion_web_a_https/"><span>Actualización web a HTTPS</span><i class="fa fa-angle-right" aria-hidden="true"></i></a>
      
    </div>

    
  </article> <!-- /.post -->

</div> <!-- /.content-box -->
<style>
    #cookie-notice {padding: 0.5rem 1rem; display: none; text-align: center; position: fixed; bottom: 0; width: calc(100% - 2rem); background: #222; color: rgba(255,255,255,0.8);}
    #cookie-notice a {display: inline-block; cursor: pointer; margin-left: 0.5rem;}
    @media (max-width: 767px) {
        #cookie-notice span {display: block; padding-top: 3px; margin-bottom: 1rem;}
        #cookie-notice a {position: relative; bottom: 4px;}
    }
</style>
<div id="cookie-notice"><span>Esta web utiliza cookies y scripts de terceros para mejorar la funcionalidad de este sitio web.</span>
    <a id="cookie-notice-accept" class="btn btn-primary btn-sm">Aceptar</a><a href="/cookies" class="btn btn-primary btn-sm">Más info</a></div>
<script>
    function createCookie(name,value,days) {
        var expires = "";
        if (days) {
            var date = new Date();
            date.setTime(date.getTime() + (days*24*60*60*1000));
            expires = "; expires=" + date.toUTCString();
        }
        document.cookie = name + "=" + value + expires + "; path=/";
    }
    function readCookie(name) {
        var nameEQ = name + "=";
        var ca = document.cookie.split(';');
        for(var i=0;i < ca.length;i++) {
            var c = ca[i];
            while (c.charAt(0)==' ') c = c.substring(1,c.length);
            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
        }
        return null;
    }
    function eraseCookie(name) {
        createCookie(name,"",-1);
    }

    if(readCookie('cookie-notice-dismissed')=='true') {

    } else {
        document.getElementById('cookie-notice').style.display = 'block';
    }
    document.getElementById('cookie-notice-accept').addEventListener("click",function() {
        createCookie('cookie-notice-dismissed','true',31);
        document.getElementById('cookie-notice').style.display = 'none';
        location.reload();
    });

</script>


      <div class="top" title="Scroll To Top">
  <i class="fa fa-chevron-up" aria-hidden="true"></i>
</div> <!-- /.top -->
      <footer class="site-footer">

  <div class="footer-wrapper">

    <h2 class="footer-heading">Rubén Arcos</h2>

    <ul class="social-footer">
    
      <li><a href="https://twitter.com/rarcosdev" target="_blank"><i class="fa fa-twitter" aria-hidden="true"></i></a></li>
    
    
    
    
    <li><a href="https://linkedin.com/in/rubenarcos2" target="_blank"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li>
    
    
    <li><a href="https://github.com/rubenarcos2" target="_blank"><i class="fa fa-github" aria-hidden="true"></i></a></li>
    
    
    
    
    
    
    
    
    
    </ul>

    <div class="copyright">
      <p><a href="https://jekyllrb.com/">Proudly powered by Jekyll</a> | Theme: Lokmont by <a href="https://artemsheludko.github.io/">Artem Sheludko</a></p>
    </div>
  </div>

</footer> <!-- /.site-footer -->

    </div> <!-- /.full-page-container -->

    <script src="/js/jquery-3.2.1.min.js"></script>
<script src="/js/jquery.viewportchecker.min.js"></script>
<script src="/js/jquery.fitvids.js"></script>
<script src="/js/simple-jekyll-search.min.js"></script>
<script src="/js/transition.js"></script>
<script src="/js/zoom.min.js"></script>
<script src="/js/main.js"></script>
    <style>
    #cookie-notice {padding: 0.5rem 1rem; display: none; text-align: center; position: fixed; bottom: 0; width: calc(100% - 2rem); background: #222; color: rgba(255,255,255,0.8);}
    #cookie-notice a {display: inline-block; cursor: pointer; margin-left: 0.5rem;}
    @media (max-width: 767px) {
        #cookie-notice span {display: block; padding-top: 3px; margin-bottom: 1rem;}
        #cookie-notice a {position: relative; bottom: 4px;}
    }
</style>
<div id="cookie-notice"><span>Esta web utiliza cookies y scripts de terceros para mejorar la funcionalidad de este sitio web.</span>
    <a id="cookie-notice-accept" class="btn btn-primary btn-sm">Aceptar</a><a href="/cookies" class="btn btn-primary btn-sm">Más info</a></div>
<script>
    function createCookie(name,value,days) {
        var expires = "";
        if (days) {
            var date = new Date();
            date.setTime(date.getTime() + (days*24*60*60*1000));
            expires = "; expires=" + date.toUTCString();
        }
        document.cookie = name + "=" + value + expires + "; path=/";
    }
    function readCookie(name) {
        var nameEQ = name + "=";
        var ca = document.cookie.split(';');
        for(var i=0;i < ca.length;i++) {
            var c = ca[i];
            while (c.charAt(0)==' ') c = c.substring(1,c.length);
            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
        }
        return null;
    }
    function eraseCookie(name) {
        createCookie(name,"",-1);
    }

    if(readCookie('cookie-notice-dismissed')=='true') {

    } else {
        document.getElementById('cookie-notice').style.display = 'block';
    }
    document.getElementById('cookie-notice-accept').addEventListener("click",function() {
        createCookie('cookie-notice-dismissed','true',31);
        document.getElementById('cookie-notice').style.display = 'none';
        location.reload();
    });

</script>
  </body>

</html>
