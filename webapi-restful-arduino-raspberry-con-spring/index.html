<!DOCTYPE html> <html lang="en-US"> <head prefix="og: http://ogp.me/ns#"> <meta charset="UTF-8" /> <meta http-equiv="X-UA-Compatible" content="ie=edge" /> <meta name="viewport" content="width=device-width, initial-scale=1.0" /> <meta name="mobile-web-app-capable" content="yes" /> <meta name="apple-mobile-web-app-capable" content="yes" /> <meta name="application-name" content="Rubén Arcos | Web & Apps developer" /> <meta name="apple-mobile-web-app-status-bar-style" content="#fff" /> <meta name="apple-mobile-web-app-title" content="Rubén Arcos | Web & Apps developer" /> <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous"> <title> WebAPI RESTful Arduino - Raspberry con Spring - Rubén Arcos | Web & Apps developer </title> <link rel="alternate" href="http://localhost:4000/webapi-restful-arduino-raspberry-con-spring/" hreflang="en-US" /> <link rel="canonical" href="http://localhost:4000/webapi-restful-arduino-raspberry-con-spring/" /> <meta name="description" content="Web &amp; Apps developer @github. Being a programmer is my project, help the user my purpose and, automate my definition processes" /> <meta name="referrer" content="no-referrer-when-downgrade" /> <meta property="fb:app_id" content="" /> <meta property="og:site_name" content="WebAPI RESTful Arduino - Raspberry con Spring | Rubén Arcos" /> <meta property="og:title" content="WebAPI RESTful Arduino - Raspberry con Spring | Rubén Arcos" /> <meta property="og:type" content="website" /> <meta property="og:url" content="http://localhost:4000/webapi-restful-arduino-raspberry-con-spring/" /> <meta property="og:description" content="Web &amp; Apps developer @github. Being a programmer is my project, help the user my purpose and, automate my definition processes" /> <meta property="og:image" content="http://localhost:4000/assets/img/ogp.png" /> <meta property="og:image:width" content="640" /> <meta property="og:image:height" content="640" /> <meta name="twitter:card" content="summary" /> <meta name="twitter:title" content="WebAPI RESTful Arduino - Raspberry con Spring | twitter_username" /> <meta name="twitter:url" content="http://localhost:4000/webapi-restful-arduino-raspberry-con-spring/" /> <meta name="twitter:site" content="@twitter_username" /> <meta name="twitter:creator" content="@twitter_username" /> <meta name="twitter:description" content="Web &amp; Apps developer @github. Being a programmer is my project, help the user my purpose and, automate my definition processes" /> <meta name="twitter:image" content="http://localhost:4000/assets/img/ogp.png" /> <link rel="apple-touch-icon" sizes="180x180" href="/assets/favicons/apple-touch-icon.png" /> <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png" /> <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png" /> <link rel="manifest" href="/assets/favicons/site.webmanifest" /> <link rel="mask-icon" href="/assets/favicons/safari-pinned-tab.svg" color="#5bbad5" /> <meta name="apple-mobile-web-app-title" content="Jekyll Klise" /> <meta name="application-name" content="Jekyll Klise" /> <meta name="msapplication-TileColor" content="#da532c" /> <meta name="theme-color" content="#2c2c2c" /> <link rel="stylesheet" href="/assets/css/style.css" /> </head> <body data-theme="light" class="notransition"> <script> const body = document.body; const data = body.getAttribute("data-theme"); const initTheme = (state) => { if (state === "dark") { body.setAttribute("data-theme", "dark"); } else if (state === "light") { body.removeAttribute("data-theme"); } else { localStorage.setItem("theme", data); } }; initTheme(localStorage.getItem("theme")); setTimeout(() => body.classList.remove("notransition"), 75); </script> <div class="navbar" role="navigation"> <nav class="menu"> <input type="checkbox" id="menu-trigger" class="menu-trigger" /> <label for="menu-trigger"> <span class="menu-icon"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 512 512" > <path d="M64,384H448V341.33H64Zm0-106.67H448V234.67H64ZM64,128v42.67H448V128Z" /> </svg> </span> </label> <a id="mode"> <svg class="mode-sunny" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 512 512" > <title>LIGHT</title> <line x1="256" y1="48" x2="256" y2="96" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="256" y1="416" x2="256" y2="464" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="403.08" y1="108.92" x2="369.14" y2="142.86" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="142.86" y1="369.14" x2="108.92" y2="403.08" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="464" y1="256" x2="416" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="96" y1="256" x2="48" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="403.08" y1="403.08" x2="369.14" y2="369.14" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="142.86" y1="142.86" x2="108.92" y2="108.92" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <circle cx="256" cy="256" r="80" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> </svg> <svg class="mode-moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 512 512" > <title>DARK</title> <line x1="256" y1="48" x2="256" y2="96" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="256" y1="416" x2="256" y2="464" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="403.08" y1="108.92" x2="369.14" y2="142.86" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="142.86" y1="369.14" x2="108.92" y2="403.08" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="464" y1="256" x2="416" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="96" y1="256" x2="48" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="403.08" y1="403.08" x2="369.14" y2="369.14" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="142.86" y1="142.86" x2="108.92" y2="108.92" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <circle cx="256" cy="256" r="80" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> </svg> </a> <div class="trigger"> <div class="trigger-container"><a class="menu-link" href="/">Home</a><a class="menu-link" href="/archive/">Labs & arts</a><a class="menu-link" href="/cv/">About & CV</a><a class="menu-link" href="/contacto/">Contact</a><a class="menu-link" href="https://github.com/rubenarcos2" target="_blank" rel="noopener" ><i class="fab fa-github fa-2x"></i></a ><a class="menu-link" href="https://es.linkedin.com/in/rubenarcos2" target="_blank" rel="noopener" ><i class="fab fa-linkedin fa-2x"></i></a ><!-- <a class="menu-link rss" href="/feed.xml"> <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 512 512" fill="#ED812E" > <title>RSS</title> <path d="M108.56,342.78a60.34,60.34,0,1,0,60.56,60.44A60.63,60.63,0,0,0,108.56,342.78Z" /> <path d="M48,186.67v86.55c52,0,101.94,15.39,138.67,52.11s52,86.56,52,138.67h86.66C325.33,312.44,199.67,186.67,48,186.67Z" /> <path d="M48,48v86.56c185.25,0,329.22,144.08,329.22,329.44H464C464,234.66,277.67,48,48,48Z" /> </svg> </a> --> </div> </div> </nav> </div> <div class="wrapper post"> <main class="page-content" aria-label="Content"> <article itemscope itemtype="https://schema.org/BlogPosting"> <header class="header"> <h1 class="header-title" itemprop="headline">WebAPI RESTful Arduino - Raspberry con Spring</h1> <div class="post-meta"> <time datetime="2018-10-19T00:00:00+00:00" itemprop="datePublished"> 19 Oct, 2018 </time> <span itemprop="author" itemscope itemtype="https://schema.org/Person"> <span itemprop="name">Rubén Arcos</span> <a href="https://github.com/rubenarcos2" target="_blank" rel="noopener">@github</a> </span> <time hidden datetime="" itemprop="dateModified"> 19 Oct, 2018 </time> <span hidden itemprop="publisher" itemtype="Person">Rubén Arcos</span> <span hidden itemprop="image"></span> <span hidden itemprop="mainEntityOfPage"><p>He realizado el siguiente proyecto de pruebas RESTful para la comunicación mediante una interfaz cliente en Arduino y Raspberry pi y con un servidor basado en Spring para la gestión de la API. En ambos clientes se dispone de acceso a los elementos físicos de hardware mediante comunicación I/O a las GPIOs correspondientes.</p> </span> </div> </header> <div class="page-content" itemprop="articleBody"> <p>He realizado el siguiente proyecto de pruebas RESTful para la comunicación mediante una interfaz cliente en Arduino y Raspberry pi y con un servidor basado en Spring para la gestión de la API. En ambos clientes se dispone de acceso a los elementos físicos de hardware mediante comunicación I/O a las GPIOs correspondientes.</p> <p><img src="171211-20Arduino20Vs20Raspberry20Pi1.jpg" alt="" /></p> <p>La idea de realización consiste en la gestión de un contador basado e instalado en una placa Arduino Uno que consta de un botón y un display LED para la visualización del mismo, a su vez el programa de este gestiona la posibilidad de incremento físico del contador (mediante el botón), como mediante la recepción exterior por el puerto COM (USB) y la asignación de un valor expecífico recibido en remoto.</p> <p>Por otra parte la placa Raspberry Pi, alberga el servidor de gestió de la API, la comunicación con Arduino Uno (mediante USB, aunque podría haberse instalado online: bluetooth, wifi local/nube) y a la GPIO.</p> <p>El consumo de la API se podrá realizar a travás de cualquier cliente HTTP, bien sea web o App Android, por ejemplo (estando en construcción esta última, que mostrará aquí en breve, cuando está libre de errores).</p> <p><img src="diagrama_sistema.jpg" alt="" /></p> <h4 id="composición-y-diseño"> <a href="#composición-y-diseño" class="anchor-head"></a> <strong>Composición y diseño:</strong> </h4> <p>Hardware : Arduino</p> <ul> <li>Display LED numárico y Botón con comunicación I/O sobre COM port</li> <li>Arduino comunnication I/O COM port, Display LED output, Botón input, Contador</li> <li>Middleware &amp; Server : Raspberry Pi</li> <li>Tomcat con Spring WebAPI services Raspberry Py</li> <li>I/O GPIO controller, LED pin out</li> <li>Client : Cualquier conexión HTTP</li> <li>HTTP API consume: Web &amp; App Android</li> </ul> <h4 id="elementos-de-hardware-que-componen-el-sistema"> <a href="#elementos-de-hardware-que-componen-el-sistema" class="anchor-head"></a> <strong>Elementos de Hardware</strong> que componen el sistema: </h4> <h3 id="la-creación-del-servidor"> <a href="#la-creación-del-servidor" class="anchor-head"></a> La creación del servidor </h3> <p>El servidor se ha creado mediante el framework de Spring incluyendo:</p> <ul> <li>Comunicación DB mediante JPA e Hibernate</li> <li>SSH para depuración y deploy remoto en Raspberry Pi</li> <li>Gestión HTTP para los controller de la API</li> <li>Comunicación y gestión de puertos GPIO (elementos físicos de hardware) <ul> <li>Arduino con conexión COM (USB) a Raspberry Pi</li> <li>GPIO I/O Raspberry Pi</li> </ul> </li> <li>Generador aleatorio de nombres (crea los datos de la DB con formatos ‘previsibles’</li> </ul> <blockquote> <p><em>Destacar que está pendiente de implementar lo incorporación de seguridad (Spring Security) y encriptación de las comunicaciones mediante HTTPS y DB de datos sensibles</em></p> </blockquote> <p><img src="web201.png" alt="" /> En el servidor se encuentra toda gestión de la comunicación con la DB, tambián están los DTO (modelos de datos que se publican en la api para su futuro consumo desde un app Android), los controladores: datos de la DB (DTOs), Contador Android, LED en Raspberry pi y sus correspodientes driver para acceso a GPIO y comunicación puerto COM.</p> <p>La compilación, depuración y deploy se está realizando en remoto desde un PC que se encuentra en la misma (o no) red que la Raspberry Pi, a la que se ataca mediante SSH para su control y subida de ficheros. La configuración de esta conexión se encuentra declarada el pom.xml, pero está prevista la externalización a un fichero externo encriptado (está retrasado por la dependencia de una librería de terceros).</p> <p>A continuación se muestra el transcurso de un funcionamiento esperado para sistema:</p> <ol> <li>Deploy remoto en raspberry</li> <li>Encendido y comunicación Raspberry&lt;-&gt;Arduino</li> <li>Puesta en marcha e incremento contador</li> <li>Consumo API y modificación contador desde esta</li> </ol> <p>Incremento del contador de forma manual (mediante botón físico) y comunición Arduino &gt; Raspberry Pi mediante puerto COM y consumo API obtención contador</p> <video width="100%" muted="" controls=""> <source src="arduino_on_manual.mp4" type="video/mp4" /> </video> <p>Comunicación Raspberry Pi GPIO desde servidor mediante consumo API, control y obtención estado LED</p> <video width="100%" muted="" controls=""> <source src="raspberry_led.mp4" type="video/mp4" /> </video> <p>Comunicación Raspberry Pi &gt; Arduino desde servidor mediante consumo API, control contador</p> <video width="100%" muted="" controls=""> <source src="arduino_ctrl_api.mp4" type="video/mp4" /> </video> <h3 id="content-license"> <a href="#content-license" class="anchor-head"></a> Content License </h3> <p>Creative Commons <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/"><img src="88x311.png" alt="License: CC BY-NC-ND 4.0" /></a></p> <p>This web page, all content with proyects and source code, is licensed under Creative Commons: Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0) <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/">More info</a></p> <p>Esta página web y todo su contenido, incluido proyectos y código fuente, está licenciado bajo una licencia de Creative Commons: Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0) <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/deed.es">Más info</a></p> </div> </article> </main> <nav class="post-nav"> <a class="post-nav-item post-nav-prev" href="/api-rest-con-spring/" > <div class="nav-arrow">Previous</div> <span class="post-title">API Rest con Spring</span> </a> <a class="post-nav-item post-nav-next" href="/actualizacion-web-a-https-y-mas/"> <div class="nav-arrow">Next</div> <span class="post-title">Actualización web a HTTPS</span> </a> </nav> <footer class="footer"> <a class="footer_item" href="/contacto">contact</a>|&nbsp; <a class="footer_item" href="/cv">cv</a>|&nbsp; <a class="footer_item" href="/cookies">cookies</a>|&nbsp; <a class="footer_item" href="/license">license of content</a>|&nbsp; <span class="footer_item">&copy; 2021</span> <small class="footer_copyright"> <!-- Klisé Theme: https://github.com/piharpi/jekyll-klise --> <a href="https://github.com/piharpi/jekyll-klise" target="_blank" rel="noreferrer noopener" >klisé</a > theme on <a href="https://jekyllrb.com" target="_blank" rel="noreferrer noopener" >jekyll</a > </small> </footer> <script src="/assets/js/main.js" defer="defer"></script> </div> </body> </html>
